"use strict";(self.webpackChunkOneDollarAI=self.webpackChunkOneDollarAI||[]).push([[553],{2934:(e,o,t)=>{t.r(o),t.d(o,{default:()=>z});var r=t(5043),a=t(9490),n=t(2703),l=t(8977),i=t(5857),s=t(2143),c=t(9285),d=t(5381),p=t(5865),u=t(2110),x=t(6494),h=t(4194),g=t(7784),b=t(8527),m=t(7392),f=t(8903),v=t(3193),A=t(4535),y=t(6240),k=t(146),j=t(4914),C=t(155),w=t(1132),S=t(3959),M=t(1637),R=t(6213),D=t(1880),P=t(4528),F=t(4556),E=t(424),I=t(3538),W=t(579);const X=(0,A.Ay)(n.A)((e=>{let{theme:o}=e;return{"& .MuiSvgIcon-root":{color:"black"}}})),_=(0,A.Ay)(l.A)((e=>{let{theme:o}=e;return{borderRadius:"30px",padding:"10px 20px",minWidth:"100px",boxShadow:"none",color:"black","& .MuiSvgIcon-root":{color:"black"},"&.MuiButton-contained":{backgroundColor:o.palette.grey[200],color:"black","&:hover":{backgroundColor:o.palette.grey[300],boxShadow:"0 3px 10px rgba(0, 0, 0, 0.2)"}},"&.MuiButton-outlined":{borderColor:"black",color:"black","&:hover":{backgroundColor:(0,i.X4)(o.palette.common.black,.05),borderColor:"black"}}}})),O=(0,A.Ay)(n.A)((e=>{let{theme:o,isDragActive:t}=e;return{border:"1px dashed",borderColor:t?o.palette.primary.main:(0,i.X4)(o.palette.grey[400],.5),borderRadius:o.spacing(1),padding:o.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",backgroundColor:t?(0,i.X4)(o.palette.primary.main,.03):(0,i.X4)(o.palette.grey[100],.3),height:"60px",transition:"all 0.3s ease","&:hover":{borderColor:o.palette.primary.main,backgroundColor:(0,i.X4)(o.palette.primary.main,.03)}}})),L=(0,A.Ay)(s.A)((e=>{let{theme:o}=e;return{color:"black !important",fontWeight:400,padding:"8px 16px","&.Mui-selected":{backgroundColor:(0,i.X4)(o.palette.primary.main,.1),color:"black !important",fontWeight:500},"&:hover":{backgroundColor:(0,i.X4)(o.palette.primary.main,.05),color:"black !important"}}})),T=(0,A.Ay)(c.A)((e=>{let{theme:o}=e;return{"& .MuiSelect-select":{color:"black !important",fontWeight:500,padding:"8px 14px",height:"44px !important"},"& .MuiSvgIcon-root":{color:"black !important"}}})),z=()=>{const e=(0,y.A)(),{user:o}=(0,P.As)(),t=(0,F.wA)(),[l,s]=(0,r.useState)(""),[c,A]=(0,r.useState)(""),[z,B]=(0,r.useState)(!1),[U,V]=(0,r.useState)(!1),[N,$]=(0,r.useState)(null),[q,G]=(0,r.useState)("#g1_nova-2-general"),[Y,H]=(0,r.useState)(!1),[J,K]=(0,r.useState)(0),[Q,Z]=(0,r.useState)(null),ee=(0,r.useRef)(null),oe=(0,r.useRef)(null),[te,re]=(0,r.useState)(!1),ae=[{id:"#g1_nova-2-automotive",label:"Automotive"},{id:"#g1_nova-2-conversationalai",label:"Conversational AI"},{id:"#g1_nova-2-drivethru",label:"Drive-thru"},{id:"#g1_nova-2-finance",label:"Finance"},{id:"#g1_nova-2-general",label:"General"},{id:"#g1_nova-2-medical",label:"Medical"},{id:"#g1_nova-2-meeting",label:"Meeting"},{id:"#g1_nova-2-phonecall",label:"Phone Call"},{id:"#g1_nova-2-video",label:"Video"},{id:"#g1_nova-2-voicemail",label:"Voicemail"}];(0,r.useEffect)((()=>{(async()=>{try{const e="https://onedollarai.com";if(D.A.get("csrftoken"))console.log("CSRF token already exists:",D.A.get("csrftoken")?"Token exists":"No token found");else{console.log("No CSRF token found, fetching a new one...");const o=await R.A.get(`${e}/api/get_csrf_token/`,{withCredentials:!0});if(200===o.status){const e=D.A.get("csrftoken");console.log("CSRF token fetched successfully:",e?"Token received":"No token set")}else console.warn("Failed to fetch CSRF token:",o.status)}}catch(c){console.error("Error fetching CSRF token:",c)}})()}),[]);const ne=e=>new Promise(((o,t)=>{const r=URL.createObjectURL(e);oe.current||(oe.current=new Audio),oe.current.src=r,oe.current.onloadedmetadata=()=>{const e=oe.current.duration;URL.revokeObjectURL(r),o(e)},oe.current.onerror=e=>{URL.revokeObjectURL(r),t(new Error("Could not load audio file"))}})),le=e=>(.006195*(e/60)).toFixed(6);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(a.mg,{children:(0,W.jsx)("title",{children:"Speech to Text | OneDollarAI"})}),(0,W.jsx)(n.A,{sx:{backgroundColor:"dark"===e.palette.mode?(0,i.X4)(e.palette.background.default,.9):(0,i.X4)(e.palette.grey[100],.9),pt:2,pb:6},children:(0,W.jsxs)(d.A,{maxWidth:"lg",children:[(0,W.jsx)(p.A,{variant:"h2",component:"h1",gutterBottom:!0,color:"black",sx:{fontSize:"2rem",fontWeight:600},children:"Speech to Text"}),(0,W.jsx)(p.A,{variant:"subtitle1",color:"black",sx:{mb:2},children:"Convert your audio files to text. Upload an audio file and get the transcription."}),(0,W.jsx)(u.A,{elevation:0,sx:{borderRadius:2,overflow:"hidden",backgroundColor:"#fff",border:"1px solid",borderColor:(0,i.X4)(e.palette.grey[300],.5)},children:(0,W.jsxs)(x.A,{sx:{p:{xs:2,md:3}},children:[c&&(0,W.jsx)(h.A,{severity:"error",sx:{mb:3,background:"transparent",color:"red"},children:c}),z&&(0,W.jsx)(h.A,{severity:"success",sx:{mb:3,background:"transparent",color:"green"},children:"Text copied to clipboard!"}),Q&&(0,W.jsxs)(h.A,{severity:"info",sx:{mb:3,background:"transparent"},children:["Estimated cost: $",Q," (",(J/60).toFixed(2)," minutes @ $0.006195/minute)"]}),U?(0,W.jsx)(n.A,{sx:{display:"flex",justifyContent:"center",my:3},children:(0,W.jsx)(M.A,{})}):(0,W.jsxs)(n.A,{sx:{mb:3,position:"relative"},children:[(0,W.jsx)(g.A,{placeholder:"Transcription will appear here...",multiline:!0,rows:6,fullWidth:!0,value:l,onChange:e=>{s(e.target.value)},variant:"outlined",InputProps:{style:{color:"black"}},sx:{backgroundColor:(0,i.X4)(e.palette.grey[100],.5),"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(0, 0, 0, 0.1)"},"&:hover fieldset":{borderColor:(0,i.X4)(e.palette.grey[400],.5)},"&.Mui-focused fieldset":{borderColor:e.palette.primary.main}}}}),(0,W.jsxs)(n.A,{sx:{position:"absolute",right:8,top:8,display:"flex"},children:[(0,W.jsx)(b.A,{title:"Copy text",children:(0,W.jsx)(X,{children:(0,W.jsx)(m.A,{onClick:()=>{l&&navigator.clipboard.writeText(l).then((()=>{B(!0),setTimeout((()=>B(!1)),2e3)})).catch((e=>{console.error("Failed to copy text:",e),A("Failed to copy text to clipboard")}))},disabled:!l,sx:{color:"black"},children:(0,W.jsx)(j.A,{fontSize:"small"})})})}),(0,W.jsx)(b.A,{title:"Clear text",children:(0,W.jsx)(X,{children:(0,W.jsx)(m.A,{onClick:()=>{s(""),A(""),$(null),K(0),Z(null),ee.current&&(ee.current.value="")},disabled:!l&&!N,sx:{color:"black"},children:(0,W.jsx)(C.A,{fontSize:"small"})})})})]})]}),(0,W.jsxs)(f.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,W.jsxs)(f.Ay,{item:!0,xs:12,md:6,children:[(0,W.jsx)("input",{type:"file",accept:"audio/*",onChange:async e=>{const o=e.target.files[0];if(!o)return;const t=o.name.split(".").pop().toLowerCase();if(["audio/wav","audio/mpeg","audio/mp3","audio/mp4","audio/x-m4a","audio/webm"].includes(o.type)||["wav","mp3","mp4","m4a","webm"].includes(t)){$(o),A("");try{const e=await ne(o);K(e);const t=le(e);Z(t)}catch(r){console.error("Error estimating audio duration:",r),K(0),Z(null)}}else A("Please upload a valid audio file (WAV, MP3, MP4, M4A, WEBM)")},style:{display:"none"},ref:ee}),(0,W.jsxs)(O,{onClick:()=>{ee.current&&ee.current.click()},isDragActive:Y,onDragEnter:e=>{e.preventDefault(),H(!0)},onDragLeave:e=>{e.preventDefault(),H(!1)},onDragOver:e=>{e.preventDefault()},onDrop:async e=>{if(e.preventDefault(),H(!1),e.dataTransfer.files&&e.dataTransfer.files[0]){const t=e.dataTransfer.files[0],r=["audio/wav","audio/mpeg","audio/mp3","audio/mp4","audio/x-m4a","audio/webm"],a=t.name.split(".").pop().toLowerCase(),n=["wav","mp3","mp4","m4a","webm"];if(!r.includes(t.type)&&!n.includes(a))return void A("Please upload a valid audio file (WAV, MP3, MP4, M4A, WEBM)");$(t),A("");try{const e=await ne(t);K(e);const o=le(e);Z(o)}catch(o){console.error("Error estimating audio duration:",o),K(0),Z(null)}}},children:[(0,W.jsx)(X,{children:(0,W.jsx)(k.A,{sx:{fontSize:28,mr:2}})}),(0,W.jsxs)(n.A,{children:[(0,W.jsx)(p.A,{variant:"body2",color:"black",children:Y?"Drop the file here...":"Attach Audio File (WAV, MP3, MP4, M4A, WEBM)"}),N&&(0,W.jsxs)(p.A,{variant:"caption",color:"black",sx:{fontWeight:"bold"},children:["Current file: ",N.name," ",J>0?`(${(J/60).toFixed(2)} minutes)`:""]})]})]})]}),(0,W.jsx)(f.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(n.A,{children:(0,W.jsx)(v.A,{fullWidth:!0,variant:"outlined",size:"small",sx:{backgroundColor:(0,i.X4)(e.palette.grey[100],.5),"& .MuiOutlinedInput-root":{color:"black","& fieldset":{borderColor:"rgba(0, 0, 0, 0.1)"},"&:hover fieldset":{borderColor:(0,i.X4)(e.palette.grey[400],.5)},"&.Mui-focused fieldset":{borderColor:e.palette.primary.main}}},children:(0,W.jsx)(T,{value:q,onChange:e=>{G(e.target.value)},displayEmpty:!0,renderValue:e=>{const o=ae.find((o=>o.id===e));return(0,W.jsx)(p.A,{variant:"body1",sx:{color:"black !important",fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"flex",alignItems:"center",height:"100%"},children:o?o.label:"Select Model"})},MenuProps:{PaperProps:{sx:{borderRadius:2,boxShadow:"0 8px 16px rgba(0, 0, 0, 0.1)",".MuiList-root":{padding:"4px 0"}}},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},children:ae.map((e=>(0,W.jsx)(L,{value:e.id,children:(0,W.jsx)(p.A,{variant:"body2",sx:{color:"black !important"},children:e.label})},e.id)))})})})})]}),(0,W.jsxs)(n.A,{sx:{display:"flex",justifyContent:"center",gap:2,flexWrap:"wrap"},children:[(0,W.jsx)(_,{variant:"contained",onClick:async()=>{if(o)if(N)if(o.balance<=0)t((0,E.v)());else{V(!0),A("");try{const e=new FormData;e.append("audio",N),e.append("model",q),e.append("cost",Q),o&&o.id&&e.append("user_id",o.id);const t="https://onedollarai.com",r=await R.A.post(`${t}/api/speech_to_text/`,e,{headers:{"Content-Type":"multipart/form-data","X-CSRFToken":D.A.get("csrftoken")},withCredentials:!0});if(!r.data||!r.data.transcript)throw new Error("Invalid response from server - no transcript returned");s(r.data.transcript),console.log("Full API response:",r.data),Z(null)}catch(e){console.error("Error processing speech to text:",e);let o="Failed to process audio file. Please try again.";e.response?(console.error("Error response data:",e.response.data),console.error("Error response status:",e.response.status),o=e.response.data.error||o):e.request&&(console.error("Error request:",e.request),o="No response from server. Please check if the server is running."),A(o)}finally{V(!1)}}else A("Please select an audio file first");else re(!0)},startIcon:U?(0,W.jsx)(M.A,{size:20,sx:{color:"black"}}):(0,W.jsx)(X,{sx:{display:"inline-flex"},children:(0,W.jsx)(S.A,{})}),size:"large",children:o?o.balance<=0?"Insufficient Balance":U?"Processing...":"Process Audio":"Login Required"}),(0,W.jsx)(_,{variant:"contained",onClick:()=>{if(!l)return void A("No transcript to download");const e=document.createElement("a"),o=new Blob([l],{type:"text/plain"});e.href=URL.createObjectURL(o),e.download="transcript.txt",document.body.appendChild(e),e.click(),document.body.removeChild(e)},disabled:!l||U,startIcon:(0,W.jsx)(X,{sx:{display:"inline-flex"},children:(0,W.jsx)(w.A,{})}),size:"large",children:"Download"})]}),!o&&(0,W.jsx)(n.A,{sx:{mt:3,p:2,backgroundColor:(0,i.X4)(e.palette.info.light,.1),borderRadius:1},children:(0,W.jsx)(p.A,{variant:"body2",color:"black",align:"center",children:"Please log in to use the speech-to-text conversion feature"})}),o&&o.balance<=0&&(0,W.jsx)(n.A,{sx:{mt:3,p:2,backgroundColor:(0,i.X4)(e.palette.warning.light,.1),borderRadius:1},children:(0,W.jsx)(p.A,{variant:"body2",color:"black",align:"center",children:"Your balance is insufficient. Please top up to use the speech-to-text conversion feature."})})]})})]})}),(0,W.jsx)(I.A,{isMainDialogOpen:te,closeMainDialog:()=>re(!1),switchBetweenDialogs:()=>{},isSecondaryDialogOpen:!1,closeSecondaryDialog:()=>{},renderActiveFormComponent:()=>{}})]})}}}]);
//# sourceMappingURL=553.b9cf9a11.chunk.js.map