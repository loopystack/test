"use strict";(self.webpackChunkOneDollarAI=self.webpackChunkOneDollarAI||[]).push([[332],{332:(e,s,o)=>{o.d(s,{A:()=>ie});var r=o(5043),l=o(6971),t=o(2703),c=o(5865),n=o(3845),a=o(8977),i=o(4669),d=o(4056),x=o(2110),j=o(6494),h=o(3336),u=o(8903),b=o(889),A=o(6605),p=o(710),g=o(5721),m=o(681),y=o(2050),v=o(8734),k=o(35),f=o(6600),w=o(5316),_=o(9347),C=(o(5225),o(8598),o(3637)),$=o(1007),P=o(6225),S=o(9010),F=o(4593),U=o(3560),R=o(8293),z=o(3635),I=o(5772),M=o(955),T=o(4115),W=o(4528),V=o(6961),B=o(611),D=o(4194),E=o(8527),L=o(7392),N=o(9650),Y=o(1806),H=o(4882),O=o(8076),q=o(2420),X=o(3460),Z=o(7805),G=o(5456),J=o(7012),K=o(4642),Q=o(2796),ee=o(1781),se=o(9215),oe=o(7795),re=o(4859),le=o(579);const te=e=>{var s,o,l,i,d,b,A,p,g;let{project:m,onUpdate:y}=e;const[v,C]=(0,r.useState)(null),[$,P]=(0,r.useState)(!1),[S,F]=(0,r.useState)(!1),[U,R]=(0,r.useState)(null);(0,r.useEffect)((()=>{z()}),[m.id]);const z=async()=>{try{P(!0),R(null);const e=await V.$.getComputingResources(m.id);C(e.data)}catch(U){console.error("Error loading computing resources:",U),R("Failed to load computing resources")}finally{P(!1)}},I=async()=>{try{var e;P(!0),R(null);const s=await V.$.analyzeComputingResources(m.id,(null===(e=m.latest_version)||void 0===e?void 0:e.content)||"");C(s.data),y&&y()}catch(U){console.error("Error analyzing resources:",U),R("Failed to analyze computing resources")}finally{P(!1)}},M=()=>{if(!v)return 0;return((v.cpu_usage||0)+(v.memory_usage||0))/2/100*20},T=e=>{switch(e){case"low":return"success";case"medium":return"warning";case"high":return"error";default:return"default"}};return $&&!v?(0,le.jsx)(x.A,{children:(0,le.jsx)(j.A,{children:(0,le.jsxs)(t.A,{sx:{textAlign:"center",py:3},children:[(0,le.jsx)(c.A,{variant:"h6",sx:{color:"black",mb:2},children:"Analyzing Computing Resources..."}),(0,le.jsx)(B.A,{})]})})}):U?(0,le.jsx)(x.A,{children:(0,le.jsxs)(j.A,{children:[(0,le.jsx)(D.A,{severity:"error",sx:{color:"black"},children:U}),(0,le.jsx)(a.A,{startIcon:(0,le.jsx)(Z.A,{}),onClick:z,sx:{mt:2,color:"black"},children:"Retry"})]})}):(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(x.A,{children:(0,le.jsxs)(j.A,{children:[(0,le.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,le.jsx)(c.A,{variant:"h6",sx:{color:"black"},children:"Computing Resource Analysis"}),(0,le.jsxs)(t.A,{sx:{display:"flex",gap:1},children:[(0,le.jsx)(E.A,{title:"View Detailed Analysis",children:(0,le.jsx)(L.A,{size:"small",onClick:()=>F(!0),sx:{color:"black"},children:(0,le.jsx)(G.A,{})})}),(0,le.jsx)(E.A,{title:"Re-analyze Resources",children:(0,le.jsx)(L.A,{size:"small",onClick:I,disabled:$,sx:{color:"black"},children:(0,le.jsx)(Z.A,{})})})]})]}),v?(0,le.jsxs)(le.Fragment,{children:[(0,le.jsxs)(u.Ay,{container:!0,spacing:3,children:[(0,le.jsxs)(u.Ay,{item:!0,xs:12,md:6,children:[(0,le.jsx)(c.A,{variant:"subtitle1",sx:{color:"black",mb:2},children:"Resource Usage"}),(0,le.jsxs)(t.A,{sx:{mb:3},children:[(0,le.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"CPU Usage"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black"},children:[null===(s=v.cpu_usage)||void 0===s?void 0:s.toFixed(1),"%"]})]}),(0,le.jsx)(B.A,{variant:"determinate",value:Math.min(v.cpu_usage||0,100),sx:{mb:2}}),(0,le.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Memory Usage"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black"},children:[null===(o=v.memory_usage)||void 0===o?void 0:o.toFixed(1)," MB"]})]}),(0,le.jsx)(B.A,{variant:"determinate",value:Math.min((v.memory_usage||0)/10,100),sx:{mb:2}}),(0,le.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Execution Time"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black"},children:[null===(l=v.execution_time)||void 0===l?void 0:l.toFixed(2),"s"]})]}),(0,le.jsx)(B.A,{variant:"determinate",value:Math.min(10*(v.execution_time||0),100)})]})]}),(0,le.jsxs)(u.Ay,{item:!0,xs:12,md:6,children:[(0,le.jsx)(c.A,{variant:"subtitle1",sx:{color:"black",mb:2},children:"Cost Analysis"}),(0,le.jsxs)(t.A,{sx:{mb:3},children:[(0,le.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Cost per Run"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"green",fontWeight:"bold"},children:["$",null===(i=v.estimated_cost_per_run)||void 0===i?void 0:i.toFixed(4)]})]}),(0,le.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Monthly Server Cost"}),(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"$20.00"})]}),(0,le.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Your Project's Monthly Cost"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"orange",fontWeight:"bold"},children:["$",M().toFixed(2)]})]}),(0,le.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Per-Use Charge"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black"},children:["$",m.price_per_use]})]})]}),(0,le.jsxs)(t.A,{sx:{mb:2},children:[(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black",mb:1},children:["Complexity Score: ",v.complexity_score||0,"/100"]}),(0,le.jsx)(n.A,{label:(W=v.complexity_score||0,W<30?"Low":W<70?"Medium":"High")+" Complexity",color:T(v.resource_intensity),size:"small",sx:{mr:1}}),(0,le.jsx)(n.A,{label:`${v.resource_intensity} Intensity`,color:T(v.resource_intensity),size:"small",variant:"outlined"})]})]})]}),(0,le.jsxs)(D.A,{severity:"info",sx:{mt:2,color:"black"},icon:(0,le.jsx)(J.A,{}),children:["Based on $20/month server cost, your project uses approximately ",(M()/20*100).toFixed(1),"% of server resources.",M()>5&&(0,le.jsxs)(c.A,{variant:"body2",sx:{mt:1,color:"orange"},children:[(0,le.jsx)(K.A,{sx:{fontSize:16,mr:.5,verticalAlign:"middle"}}),"High resource usage detected. Consider optimizing your code."]})]})]}):(0,le.jsxs)(t.A,{sx:{textAlign:"center",py:3},children:[(0,le.jsx)(c.A,{variant:"body1",sx:{color:"black",mb:2},children:"No computing resource analysis available"}),(0,le.jsx)(a.A,{variant:"contained",startIcon:(0,le.jsx)(Q.A,{}),onClick:I,disabled:$,sx:{backgroundColor:"black",color:"white"},children:"Analyze Resources"})]})]})}),(0,le.jsxs)(k.A,{open:S,onClose:()=>F(!1),maxWidth:"md",fullWidth:!0,children:[(0,le.jsx)(f.A,{sx:{color:"black"},children:"Detailed Computing Resource Analysis"}),(0,le.jsx)(w.A,{children:v&&(0,le.jsx)(t.A,{children:(0,le.jsxs)(u.Ay,{container:!0,spacing:3,children:[(0,le.jsxs)(u.Ay,{item:!0,xs:12,children:[(0,le.jsx)(c.A,{variant:"h6",sx:{color:"black",mb:2},children:"Resource Breakdown"}),(0,le.jsx)(N.A,{component:h.A,children:(0,le.jsxs)(Y.A,{children:[(0,le.jsx)(H.A,{children:(0,le.jsxs)(O.A,{children:[(0,le.jsx)(q.A,{sx:{color:"black",fontWeight:"bold"},children:"Resource"}),(0,le.jsx)(q.A,{sx:{color:"black",fontWeight:"bold"},children:"Usage"}),(0,le.jsx)(q.A,{sx:{color:"black",fontWeight:"bold"},children:"Percentage"}),(0,le.jsx)(q.A,{sx:{color:"black",fontWeight:"bold"},children:"Status"})]})}),(0,le.jsxs)(X.A,{children:[(0,le.jsxs)(O.A,{children:[(0,le.jsx)(q.A,{sx:{color:"black"},children:(0,le.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(ee.A,{fontSize:"small"}),"CPU Usage"]})}),(0,le.jsxs)(q.A,{sx:{color:"black"},children:[null===(d=v.cpu_usage)||void 0===d?void 0:d.toFixed(1),"%"]}),(0,le.jsxs)(q.A,{sx:{color:"black"},children:[null===(b=v.cpu_usage)||void 0===b?void 0:b.toFixed(1),"%"]}),(0,le.jsx)(q.A,{children:(0,le.jsx)(n.A,{label:v.cpu_usage>70?"High":v.cpu_usage>30?"Medium":"Low",color:v.cpu_usage>70?"error":v.cpu_usage>30?"warning":"success",size:"small"})})]}),(0,le.jsxs)(O.A,{children:[(0,le.jsx)(q.A,{sx:{color:"black"},children:(0,le.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(se.A,{fontSize:"small"}),"Memory Usage"]})}),(0,le.jsxs)(q.A,{sx:{color:"black"},children:[null===(A=v.memory_usage)||void 0===A?void 0:A.toFixed(1)," MB"]}),(0,le.jsxs)(q.A,{sx:{color:"black"},children:[((v.memory_usage||0)/1e3*100).toFixed(1),"%"]}),(0,le.jsx)(q.A,{children:(0,le.jsx)(n.A,{label:v.memory_usage>700?"High":v.memory_usage>300?"Medium":"Low",color:v.memory_usage>700?"error":v.memory_usage>300?"warning":"success",size:"small"})})]}),(0,le.jsxs)(O.A,{children:[(0,le.jsx)(q.A,{sx:{color:"black"},children:(0,le.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(oe.A,{fontSize:"small"}),"Execution Time"]})}),(0,le.jsxs)(q.A,{sx:{color:"black"},children:[null===(p=v.execution_time)||void 0===p?void 0:p.toFixed(2),"s"]}),(0,le.jsxs)(q.A,{sx:{color:"black"},children:[((v.execution_time||0)/30*100).toFixed(1),"%"]}),(0,le.jsx)(q.A,{children:(0,le.jsx)(n.A,{label:v.execution_time>20?"High":v.execution_time>10?"Medium":"Low",color:v.execution_time>20?"error":v.execution_time>10?"warning":"success",size:"small"})})]}),(0,le.jsxs)(O.A,{children:[(0,le.jsx)(q.A,{sx:{color:"black"},children:(0,le.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(re.A,{fontSize:"small"}),"Storage Usage"]})}),(0,le.jsxs)(q.A,{sx:{color:"black"},children:[null===(g=v.storage_usage)||void 0===g?void 0:g.toFixed(1)," MB"]}),(0,le.jsxs)(q.A,{sx:{color:"black"},children:[((v.storage_usage||0)/100*100).toFixed(1),"%"]}),(0,le.jsx)(q.A,{children:(0,le.jsx)(n.A,{label:v.storage_usage>70?"High":v.storage_usage>30?"Medium":"Low",color:v.storage_usage>70?"error":v.storage_usage>30?"warning":"success",size:"small"})})]})]})]})})]}),(0,le.jsxs)(u.Ay,{item:!0,xs:12,children:[(0,le.jsx)(c.A,{variant:"h6",sx:{color:"black",mb:2},children:"Cost Analysis Details"}),(0,le.jsxs)(D.A,{severity:"info",sx:{color:"black"},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{mb:1},children:(0,le.jsx)("strong",{children:"Cost Calculation Formula:"})}),(0,le.jsx)(c.A,{variant:"body2",sx:{fontFamily:"monospace"},children:"Cost per run = (CPU% + Memory%) \xd7 Execution Time \xd7 Monthly Server Cost \xf7 (30 days \xd7 24 hours \xd7 3600 seconds)"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{mt:1},children:[(0,le.jsx)("strong",{children:"Monthly Server Cost:"})," $20.00"]}),(0,le.jsxs)(c.A,{variant:"body2",children:[(0,le.jsx)("strong",{children:"Your Project's Monthly Cost:"})," $",M().toFixed(2)]})]})]})]})})}),(0,le.jsx)(_.A,{children:(0,le.jsx)(a.A,{onClick:()=>F(!1),sx:{color:"black"},children:"Close"})})]})]});var W};var ce=o(9336),ne=o(8746);const ae=e=>{let{project:s,onUpdate:o}=e;const[l,i]=(0,r.useState)(null),[d,b]=(0,r.useState)(null),[A,p]=(0,r.useState)(!1),[g,m]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null);(0,r.useEffect)((()=>{C()}),[s.id]);const C=async()=>{try{p(!0),v(null);const e=await V.$.getUserUsage(s.id);i(e.data);try{const e=await V.$.getProjectUsage(s.id);b(e.data)}catch(y){console.log("No permission to view overall project usage")}}catch(y){console.error("Error loading usage data:",y),v("Failed to load usage data")}finally{p(!1)}},$=()=>l?parseFloat(l.total_cost||0):0,P=()=>l&&0!==l.usage_count?$()/l.usage_count:0,S=e=>0===e?{label:"Never Used",color:"default"}:e<5?{label:"Light Usage",color:"success"}:e<20?{label:"Moderate Usage",color:"warning"}:{label:"Heavy Usage",color:"error"},U=e=>0===e?{label:"No Cost",color:"success"}:e<1?{label:"Low Cost",color:"success"}:e<5?{label:"Moderate Cost",color:"warning"}:{label:"High Cost",color:"error"};return A&&!l?(0,le.jsx)(x.A,{children:(0,le.jsx)(j.A,{children:(0,le.jsxs)(t.A,{sx:{textAlign:"center",py:3},children:[(0,le.jsx)(c.A,{variant:"h6",sx:{color:"black",mb:2},children:"Loading Usage Data..."}),(0,le.jsx)(B.A,{})]})})}):y?(0,le.jsx)(x.A,{children:(0,le.jsxs)(j.A,{children:[(0,le.jsx)(D.A,{severity:"error",sx:{color:"black"},children:y}),(0,le.jsx)(a.A,{startIcon:(0,le.jsx)(Z.A,{}),onClick:C,sx:{mt:2,color:"black"},children:"Retry"})]})}):(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(x.A,{children:(0,le.jsxs)(j.A,{children:[(0,le.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,le.jsx)(c.A,{variant:"h6",sx:{color:"black"},children:"Usage & Billing Tracker"}),(0,le.jsxs)(t.A,{sx:{display:"flex",gap:1},children:[(0,le.jsx)(E.A,{title:"View Detailed Usage",children:(0,le.jsx)(L.A,{size:"small",onClick:()=>m(!0),sx:{color:"black"},children:(0,le.jsx)(G.A,{})})}),(0,le.jsx)(E.A,{title:"Refresh Usage Data",children:(0,le.jsx)(L.A,{size:"small",onClick:C,disabled:A,sx:{color:"black"},children:(0,le.jsx)(Z.A,{})})})]})]}),l?(0,le.jsxs)(le.Fragment,{children:[(0,le.jsxs)(u.Ay,{container:!0,spacing:3,children:[(0,le.jsxs)(u.Ay,{item:!0,xs:12,md:6,children:[(0,le.jsx)(c.A,{variant:"subtitle1",sx:{color:"black",mb:2},children:"Your Usage"}),(0,le.jsxs)(t.A,{sx:{mb:3},children:[(0,le.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Times Used"}),(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black",fontWeight:"bold"},children:l.usage_count})]}),(0,le.jsx)(n.A,{label:S(l.usage_count).label,color:S(l.usage_count).color,size:"small",sx:{mb:2}}),(0,le.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Total Cost"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"green",fontWeight:"bold"},children:["$",$().toFixed(2)]})]}),(0,le.jsx)(n.A,{label:U($()).label,color:U($()).color,size:"small",sx:{mb:2}}),(0,le.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Average Cost per Use"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black"},children:["$",P().toFixed(4)]})]}),(0,le.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Last Used"}),(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:(0,I.A)(new Date(l.last_used),{addSuffix:!0})})]})]})]}),(0,le.jsxs)(u.Ay,{item:!0,xs:12,md:6,children:[(0,le.jsx)(c.A,{variant:"subtitle1",sx:{color:"black",mb:2},children:"Pricing Information"}),(0,le.jsxs)(t.A,{sx:{mb:3},children:[(0,le.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"One-time Purchase"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black",fontWeight:"bold"},children:["$",s.price]})]}),(0,le.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Per-use Charge"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black",fontWeight:"bold"},children:["$",s.price_per_use]})]}),(0,le.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Your Total Spent"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"orange",fontWeight:"bold"},children:["$",$().toFixed(2)]})]}),(0,le.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Savings vs One-time"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:s.price>$()?"green":"red",fontWeight:"bold"},children:["$",(s.price-$()).toFixed(2)]})]})]}),(0,le.jsxs)(t.A,{children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black",mb:1},children:(0,le.jsx)("strong",{children:"Recommendation:"})}),s.price>$()?(0,le.jsx)(D.A,{severity:"success",sx:{color:"black"},children:(0,le.jsxs)(c.A,{variant:"body2",children:["Continue with per-use billing. You're saving $",(s.price-$()).toFixed(2)," compared to one-time purchase."]})}):(0,le.jsx)(D.A,{severity:"warning",sx:{color:"black"},children:(0,le.jsxs)(c.A,{variant:"body2",children:["Consider one-time purchase. You've spent $",$().toFixed(2)," vs $",s.price," one-time cost."]})})]})]})]}),(0,le.jsx)(D.A,{severity:"info",sx:{mt:2,color:"black"},icon:(0,le.jsx)(Q.A,{}),children:(0,le.jsxs)(c.A,{variant:"body2",children:["You've used this project ",l.usage_count," times with a total cost of $",$().toFixed(2),".",l.usage_count>0&&(0,le.jsxs)("span",{children:[" Average cost per use: $",P().toFixed(4)]})]})})]}):(0,le.jsxs)(t.A,{sx:{textAlign:"center",py:3},children:[(0,le.jsx)(c.A,{variant:"body1",sx:{color:"black",mb:2},children:"No usage data available"}),(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Start using this project to see usage statistics and billing information."})]})]})}),(0,le.jsxs)(k.A,{open:g,onClose:()=>m(!1),maxWidth:"md",fullWidth:!0,children:[(0,le.jsx)(f.A,{sx:{color:"black"},children:"Detailed Usage & Billing Information"}),(0,le.jsx)(w.A,{children:l&&(0,le.jsx)(t.A,{children:(0,le.jsxs)(u.Ay,{container:!0,spacing:3,children:[(0,le.jsxs)(u.Ay,{item:!0,xs:12,children:[(0,le.jsx)(c.A,{variant:"h6",sx:{color:"black",mb:2},children:"Your Usage Details"}),(0,le.jsx)(N.A,{component:h.A,children:(0,le.jsxs)(Y.A,{children:[(0,le.jsx)(H.A,{children:(0,le.jsxs)(O.A,{children:[(0,le.jsx)(q.A,{sx:{color:"black",fontWeight:"bold"},children:"Metric"}),(0,le.jsx)(q.A,{sx:{color:"black",fontWeight:"bold"},children:"Value"}),(0,le.jsx)(q.A,{sx:{color:"black",fontWeight:"bold"},children:"Status"})]})}),(0,le.jsxs)(X.A,{children:[(0,le.jsxs)(O.A,{children:[(0,le.jsx)(q.A,{sx:{color:"black"},children:(0,le.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(F.A,{fontSize:"small"}),"Total Usage Count"]})}),(0,le.jsxs)(q.A,{sx:{color:"black"},children:[l.usage_count," times"]}),(0,le.jsx)(q.A,{children:(0,le.jsx)(n.A,{label:S(l.usage_count).label,color:S(l.usage_count).color,size:"small"})})]}),(0,le.jsxs)(O.A,{children:[(0,le.jsx)(q.A,{sx:{color:"black"},children:(0,le.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(J.A,{fontSize:"small"}),"Total Cost"]})}),(0,le.jsxs)(q.A,{sx:{color:"black"},children:["$",$().toFixed(2)]}),(0,le.jsx)(q.A,{children:(0,le.jsx)(n.A,{label:U($()).label,color:U($()).color,size:"small"})})]}),(0,le.jsxs)(O.A,{children:[(0,le.jsx)(q.A,{sx:{color:"black"},children:(0,le.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(oe.A,{fontSize:"small"}),"Average Cost per Use"]})}),(0,le.jsxs)(q.A,{sx:{color:"black"},children:["$",P().toFixed(4)]}),(0,le.jsx)(q.A,{children:(0,le.jsx)(n.A,{label:P()<s.price_per_use?"Below Rate":"At Rate",color:P()<s.price_per_use?"success":"warning",size:"small"})})]}),(0,le.jsxs)(O.A,{children:[(0,le.jsx)(q.A,{sx:{color:"black"},children:(0,le.jsxs)(t.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(ne.A,{fontSize:"small"}),"Last Used"]})}),(0,le.jsx)(q.A,{sx:{color:"black"},children:(0,I.A)(new Date(l.last_used),{addSuffix:!0})}),(0,le.jsx)(q.A,{children:(0,le.jsx)(n.A,{label:"Recent",color:"success",size:"small"})})]})]})]})})]}),d&&d.length>0&&(0,le.jsxs)(u.Ay,{item:!0,xs:12,children:[(0,le.jsx)(c.A,{variant:"h6",sx:{color:"black",mb:2},children:"Project Usage Comparison"}),(0,le.jsx)(N.A,{component:h.A,children:(0,le.jsxs)(Y.A,{children:[(0,le.jsx)(H.A,{children:(0,le.jsxs)(O.A,{children:[(0,le.jsx)(q.A,{sx:{color:"black",fontWeight:"bold"},children:"User"}),(0,le.jsx)(q.A,{sx:{color:"black",fontWeight:"bold"},children:"Usage Count"}),(0,le.jsx)(q.A,{sx:{color:"black",fontWeight:"bold"},children:"Total Cost"}),(0,le.jsx)(q.A,{sx:{color:"black",fontWeight:"bold"},children:"Last Used"})]})}),(0,le.jsx)(X.A,{children:d.slice(0,10).map(((e,s)=>(0,le.jsxs)(O.A,{children:[(0,le.jsx)(q.A,{sx:{color:"black"},children:e.user.email}),(0,le.jsx)(q.A,{sx:{color:"black"},children:e.usage_count}),(0,le.jsxs)(q.A,{sx:{color:"black"},children:["$",parseFloat(e.total_cost).toFixed(2)]}),(0,le.jsx)(q.A,{sx:{color:"black"},children:(0,I.A)(new Date(e.last_used),{addSuffix:!0})})]},s)))})]})})]}),(0,le.jsxs)(u.Ay,{item:!0,xs:12,children:[(0,le.jsx)(c.A,{variant:"h6",sx:{color:"black",mb:2},children:"Billing Recommendations"}),(0,le.jsxs)(D.A,{severity:"info",sx:{color:"black"},children:[(0,le.jsxs)(c.A,{variant:"body2",sx:{mb:1},children:[(0,le.jsx)("strong",{children:"Current Billing Method:"})," Per-use billing at $",s.price_per_use," per use"]}),(0,le.jsxs)(c.A,{variant:"body2",sx:{mb:1},children:[(0,le.jsx)("strong",{children:"One-time Purchase Option:"})," $",s.price]}),(0,le.jsxs)(c.A,{variant:"body2",sx:{mb:1},children:[(0,le.jsx)("strong",{children:"Your Total Spent:"})," $",$().toFixed(2)]}),(0,le.jsx)(ce.A,{sx:{my:1}}),(0,le.jsx)(c.A,{variant:"body2",children:s.price>$()?(0,le.jsxs)("span",{style:{color:"green"},children:["\u2705 Continue with per-use billing. You're saving $",(s.price-$()).toFixed(2),"."]}):(0,le.jsxs)("span",{style:{color:"orange"},children:["\u26a0\ufe0f Consider one-time purchase. You've exceeded the one-time cost by $",($()-s.price).toFixed(2),"."]})})]})]})]})})}),(0,le.jsx)(_.A,{children:(0,le.jsx)(a.A,{onClick:()=>m(!1),sx:{color:"black"},children:"Close"})})]})]})},ie=e=>{let{project:s,onClose:o,onRun:B,onBuy:D,isOwner:E}=e;const L=(0,l.Zp)(),{user:N}=(0,W.As)(),[Y,H]=(0,r.useState)(0),[O,q]=(0,r.useState)(null),[X,Z]=(0,r.useState)(null),[G,J]=(0,r.useState)([]),[K,Q]=(0,r.useState)(!1),[ee,se]=(0,r.useState)(null),[oe,re]=(0,r.useState)(!1);(0,r.useEffect)((()=>{ce(),ne(),E&&ie()}),[s.id,E]);const ce=async()=>{try{const e=await V.$.getComputingResources(s.id);q(e.data)}catch(e){console.error("Error loading computing resources:",e)}},ne=async()=>{try{const e=await V.$.getUserUsage(s.id);Z(e.data)}catch(e){console.error("Error loading user usage:",e)}},ie=async()=>{try{const e=await V.$.getPendingVersions(s.id);J(e.data)}catch(e){console.error("Error loading pending versions:",e)}},de=s.latest_public_version||s.latest_private_version;return(0,le.jsxs)(t.A,{sx:{width:"100%",maxHeight:"80vh",overflow:"auto"},children:[(0,le.jsxs)(t.A,{sx:{mb:3},children:[(0,le.jsxs)(t.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[(0,le.jsxs)(t.A,{children:[(0,le.jsx)(c.A,{variant:"h4",component:"h1",gutterBottom:!0,sx:{color:"black"},children:s.title}),(0,le.jsx)(c.A,{variant:"body1",sx:{mb:2,color:"black"},children:s.description})]}),(0,le.jsxs)(t.A,{sx:{display:"flex",gap:1},children:[s.is_public?(0,le.jsx)(n.A,{icon:(0,le.jsx)(C.A,{sx:{color:"black"}}),label:"Public",color:"primary",variant:"outlined"}):(0,le.jsx)(n.A,{icon:(0,le.jsx)($.A,{sx:{color:"black"}}),label:"Private",color:"default",variant:"outlined"}),(0,le.jsx)(n.A,{icon:(0,le.jsx)(P.A,{sx:{color:"black"}}),label:s.status,color:(e=>{switch(e){case"approved":return"success";case"pending":return"warning";case"rejected":return"error";default:return"default"}})(s.status),variant:"outlined"})]})]}),(0,le.jsxs)(t.A,{sx:{display:"flex",gap:2,mb:3},children:[s.price>0&&(0,le.jsxs)(a.A,{variant:"outlined",color:"warning",startIcon:(0,le.jsx)(S.A,{sx:{color:"black"}}),onClick:D,sx:{color:"black",borderColor:"black"},children:["Buy for $",s.price]}),(0,le.jsx)(a.A,{variant:"contained",startIcon:(0,le.jsx)(F.A,{sx:{color:"white"}}),onClick:()=>{L(`/project/${s.id}/run`)},sx:{backgroundColor:"black",color:"white"},children:"Run Project"}),E&&(0,le.jsx)(a.A,{variant:"outlined",startIcon:(0,le.jsx)(U.A,{sx:{color:"black"}}),onClick:()=>L(`/project/${s.id}/edit`),sx:{color:"black",borderColor:"black"},children:"Edit Project"})]})]}),(0,le.jsx)(t.A,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:(0,le.jsxs)(i.A,{value:Y,onChange:(e,s)=>{H(s)},children:[(0,le.jsx)(d.A,{label:"Content",sx:{color:"black"}}),(0,le.jsx)(d.A,{label:"Usage",sx:{color:"black"}}),(0,le.jsx)(d.A,{label:"Computing Resources",sx:{color:"black"}}),(0,le.jsx)(d.A,{label:"Analytics",sx:{color:"black"}}),E&&(0,le.jsx)(d.A,{label:"Collaboration",sx:{color:"black"}})]})}),(0,le.jsxs)(t.A,{sx:{mt:2},children:[0===Y&&(0,le.jsx)(x.A,{children:(0,le.jsxs)(j.A,{children:[(0,le.jsx)(c.A,{variant:"h6",gutterBottom:!0,sx:{color:"black"},children:"Project Content"}),(0,le.jsx)(h.A,{sx:{p:2,backgroundColor:"#f5f5f5",fontFamily:"monospace",whiteSpace:"pre-wrap",overflow:"auto",maxHeight:"400px"},children:"code"===s.project_type?(0,le.jsx)("div",{style:{color:"black"},children:(0,le.jsx)(M.oz,{rehypePlugins:[T.A],children:(null===de||void 0===de?void 0:de.content)||"No content available"})}):(0,le.jsx)(c.A,{variant:"body1",sx:{color:"black"},children:(null===de||void 0===de?void 0:de.content)||"No content available"})})]})}),1===Y&&(0,le.jsxs)(u.Ay,{container:!0,spacing:3,children:[(0,le.jsx)(u.Ay,{item:!0,xs:12,md:6,children:(0,le.jsx)(x.A,{children:(0,le.jsxs)(j.A,{children:[(0,le.jsx)(c.A,{variant:"h6",gutterBottom:!0,sx:{color:"black"},children:"Usage Instructions"}),null!==de&&void 0!==de&&de.usage_instructions?(0,le.jsx)("div",{style:{color:"black"},children:(0,le.jsx)(M.oz,{children:de.usage_instructions})}):(0,le.jsx)(c.A,{sx:{color:"black"},children:"No usage instructions available."})]})})}),(0,le.jsx)(u.Ay,{item:!0,xs:12,md:6,children:(0,le.jsx)(ae,{project:s,onUpdate:ne})})]}),2===Y&&(0,le.jsx)(te,{project:s,onUpdate:ce}),3===Y&&(0,le.jsxs)(u.Ay,{container:!0,spacing:3,children:[(0,le.jsx)(u.Ay,{item:!0,xs:12,md:6,children:(0,le.jsx)(x.A,{children:(0,le.jsxs)(j.A,{children:[(0,le.jsx)(c.A,{variant:"h6",gutterBottom:!0,sx:{color:"black"},children:"Project Analytics"}),(0,le.jsxs)(t.A,{sx:{mb:2},children:[(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black",mb:1},children:["Total Views: ",s.total_views||0]}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black",mb:1},children:["Total Runs: ",s.total_runs||0]}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black",mb:1},children:["Total Purchases: ",s.total_purchases||0]}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black",mb:1},children:["Total Revenue: $",s.total_revenue||0]})]})]})})}),X&&(0,le.jsx)(u.Ay,{item:!0,xs:12,md:6,children:(0,le.jsx)(x.A,{children:(0,le.jsxs)(j.A,{children:[(0,le.jsx)(c.A,{variant:"h6",gutterBottom:!0,sx:{color:"black"},children:"Your Usage"}),(0,le.jsxs)(t.A,{sx:{mb:2},children:[(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black",mb:1},children:["Times Used: ",X.usage_count]}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black",mb:1},children:["Total Cost: $",X.total_cost]}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black",mb:1},children:["Last Used: ",(0,I.A)(new Date(X.last_used),{addSuffix:!0})]})]})]})})})]}),4===Y&&E&&(0,le.jsx)(x.A,{children:(0,le.jsxs)(j.A,{children:[(0,le.jsx)(c.A,{variant:"h6",gutterBottom:!0,sx:{color:"black"},children:"Collaboration Management"}),(0,le.jsxs)(b.A,{children:[(0,le.jsx)(A.A,{expandIcon:(0,le.jsx)(R.A,{}),children:(0,le.jsxs)(c.A,{sx:{color:"black"},children:["Pending Versions (",G.length,")"]})}),(0,le.jsx)(p.A,{children:G.length>0?(0,le.jsx)(g.A,{children:G.map((e=>(0,le.jsxs)(m.Ay,{divider:!0,children:[(0,le.jsx)(y.A,{children:(0,le.jsx)(U.A,{sx:{color:"black"}})}),(0,le.jsx)(v.A,{primary:`Version ${e.version_number} by ${e.created_by.first_name} ${e.created_by.last_name}`,secondary:(0,I.A)(new Date(e.created_at),{addSuffix:!0}),sx:{"& .MuiListItemText-primary":{color:"black"}}}),(0,le.jsx)(t.A,{sx:{display:"flex",gap:1},children:(0,le.jsx)(a.A,{size:"small",color:"success",startIcon:(0,le.jsx)(z.A,{}),onClick:()=>{se(e),Q(!0)},children:"Review"})})]},e.id)))}):(0,le.jsx)(c.A,{sx:{color:"black"},children:"No pending versions to review."})})]})]})})]}),(0,le.jsxs)(k.A,{open:K,onClose:()=>Q(!1),maxWidth:"md",fullWidth:!0,children:[(0,le.jsxs)(f.A,{sx:{color:"black"},children:["Review Version ",null===ee||void 0===ee?void 0:ee.version_number]}),(0,le.jsx)(w.A,{children:ee&&(0,le.jsxs)(t.A,{children:[(0,le.jsxs)(c.A,{variant:"body2",sx:{mb:2,color:"black"},children:["Submitted by: ",ee.created_by.first_name," ",ee.created_by.last_name]}),(0,le.jsxs)(c.A,{variant:"body2",sx:{mb:2,color:"black"},children:["Date: ",(0,I.A)(new Date(ee.created_at),{addSuffix:!0})]}),(0,le.jsx)(c.A,{variant:"h6",sx:{mb:2,color:"black"},children:"Content Changes:"}),(0,le.jsx)(h.A,{sx:{p:2,backgroundColor:"#f5f5f5",fontFamily:"monospace",whiteSpace:"pre-wrap",overflow:"auto",maxHeight:"300px"},children:(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:ee.content})})]})}),(0,le.jsxs)(_.A,{children:[(0,le.jsx)(a.A,{onClick:()=>Q(!1),sx:{color:"black"},children:"Cancel"}),(0,le.jsx)(a.A,{onClick:()=>(async(e,o)=>{try{re(!0),await V.$.rejectVersion(s.id,e,o),await ie(),Q(!1)}catch(r){console.error("Error rejecting version:",r)}finally{re(!1)}})(null===ee||void 0===ee?void 0:ee.id,"Rejected by owner"),color:"error",variant:"outlined",disabled:oe,children:"Reject"}),(0,le.jsx)(a.A,{onClick:()=>(async e=>{try{re(!0),await V.$.approveVersion(s.id,e),await ie(),Q(!1)}catch(o){console.error("Error approving version:",o)}finally{re(!1)}})(null===ee||void 0===ee?void 0:ee.id),color:"success",variant:"contained",disabled:oe,children:"Approve"})]})]})]})}},6961:(e,s,o)=>{o.d(s,{$:()=>n});var r=o(6213),l=o(1880);const t="https://onedollarai.com",c=r.A.create({baseURL:`${t}/api`,headers:{"Content-Type":"application/json"},withCredentials:!0});c.interceptors.request.use((async e=>{await(async()=>{try{if(l.A.get("csrftoken"))console.log("CSRF token already exists:",l.A.get("csrftoken")?"Token exists":"No token found");else{console.log("No CSRF token found, fetching a new one...");const e=await r.A.get(`${t}/api/get_csrf_token/`,{withCredentials:!0});if(200===e.status){const e=l.A.get("csrftoken");console.log("CSRF token fetched successfully:",e?"Token received":"No token set")}else console.warn("Failed to fetch CSRF token:",e.status)}}catch(e){console.error("Error fetching CSRF token:",e)}})();const s=localStorage.getItem("accessToken");s&&(e.headers.Authorization=`Bearer ${s}`);const o=l.A.get("csrftoken");return o&&(e.headers["X-CSRFToken"]=o),e}),(e=>Promise.reject(e))),c.interceptors.response.use((e=>e),(e=>{var s;return 401===(null===(s=e.response)||void 0===s?void 0:s.status)&&(localStorage.removeItem("accessToken"),window.location.href="/login"),Promise.reject(e)}));const n={getAllProjects:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await c.get("/projects/",{params:e})},getMyProjects:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await c.get("/projects/my_projects/",{params:e})},searchProjects:async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await c.get("/projects/search/",{params:{q:e,...s}})},getProject:async e=>await c.get(`/projects/${e}/`),createProject:async e=>await c.post("/projects/",e),updateProject:async(e,s)=>await c.put(`/projects/${e}/`,s),deleteProject:async e=>await c.delete(`/projects/${e}/`),runProject:async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await c.post(`/projects/${e}/run/`,s)},buyProject:async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await c.post(`/projects/${e}/buy/`,s)},trackProjectView:async e=>await c.post(`/projects/${e}/view/`),getProjectAnalytics:async e=>await c.get(`/projects/${e}/analytics/`),getCollaborators:async e=>await c.get(`/projects/${e}/collaborators/`),addCollaborator:async(e,s)=>await c.post(`/projects/${e}/add_collaborator/`,s),removeCollaborator:async(e,s)=>await c.post(`/projects/${e}/remove_collaborator/`,{user_id:s}),submitVersionForReview:async(e,s)=>await c.post(`/projects/${e}/submit_version_for_review/`,s),getPendingVersions:async e=>await c.get(`/projects/${e}/pending_versions/`),promoteVersionToPublic:async(e,s)=>await c.post(`/projects/${e}/versions/${s}/promote_to_public/`),getProjectVersions:async e=>await c.get(`/projects/${e}/versions/`),createProjectVersion:async(e,s)=>await c.post(`/projects/${e}/versions/`,s),updateProjectVersion:async(e,s,o)=>await c.put(`/projects/${e}/versions/${s}/`,o),deleteProjectVersion:async(e,s)=>await c.delete(`/projects/${e}/versions/${s}/`),approveProjectVersion:async(e,s)=>await c.post(`/projects/${e}/versions/${s}/approve/`),rejectProjectVersion:async function(e,s){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return await c.post(`/projects/${e}/versions/${s}/reject/`,{reason:o})},analyzeComputingResources:async(e,s)=>await c.post(`/projects/${e}/computing-resources/`,{code:s}),getComputingResources:async e=>await c.get(`/projects/${e}/computing-resources/`),updateComputingResources:async(e,s,o)=>await c.put(`/projects/${e}/computing-resources/${s}/`,o),getAllProjectsAdmin:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await c.get("/projects/admin/projects/",{params:e})},getAdminAnalytics:async()=>await c.get("/projects/admin/projects/analytics/"),approveProject:async e=>await c.post(`/projects/admin/projects/${e}/approve/`),rejectProject:async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return await c.post(`/projects/admin/projects/${e}/reject/`,{reason:s})},getProjectUsage:async e=>await c.get(`/projects/${e}/usage/`),getUserProjectUsage:async e=>await c.get(`/projects/${e}/user_usage/`),getUserUsage:async e=>await c.get(`/projects/${e}/user_usage/`),getPendingVersions:async e=>await c.get(`/projects/${e}/pending_versions/`),approveVersion:async(e,s)=>await c.post(`/projects/${e}/versions/${s}/approve/`),rejectVersion:async(e,s,o)=>await c.post(`/projects/${e}/versions/${s}/reject/`,{reason:o}),submitVersionForReview:async(e,s)=>await c.post(`/projects/${e}/submit_version_for_review/`,s),submitForReview:async(e,s)=>await c.post(`/projects/${e}/submit_for_review/`,s),getPublicProject:async e=>await c.get(`/projects/public/${e}/`),getPrivateProject:async e=>await c.get(`/projects/private/${e}/`),executeCode:async(e,s)=>await c.post("/projects/execute-code/",{code:e,language:s}),advancedSearch:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{query:s="",projectType:o="",language:r="",minPrice:l="",maxPrice:t="",sortBy:n="created_at",sortOrder:a="desc"}=e,i={q:s,type:o,language:r,min_price:l,max_price:t,sort_by:n,sort_order:a};return await c.get("/projects/search/",{params:i})}}}}]);
//# sourceMappingURL=332.a9a6d950.chunk.js.map