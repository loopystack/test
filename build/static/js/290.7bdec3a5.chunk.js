"use strict";(self.webpackChunkOneDollarAI=self.webpackChunkOneDollarAI||[]).push([[290],{290:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var o=r(5043),s=r(6971),a=r(9490),n=r(4535),c=r(2703),i=r(5865),l=r(5381),u=r(2698),d=r(8446),p=r(2110),h=r(6494),j=r(794),g=r(4194),v=r(4528),x=r(6961),m=r(467),y=r(579);const b=(0,n.Ay)(c.A)((e=>{let{theme:t}=e;return{display:"flex",width:"100%",flexDirection:"column",height:`calc(100dvh - ${t.header.mobileHeight})`,[t.breakpoints.up("md")]:{height:`calc(100dvh - ${t.header.height})`}}})),f=()=>{var e;const{projectId:t}=(0,s.g)(),r=(0,s.Zp)(),{user:n}=(0,v.As)(),[f,w]=(0,o.useState)(null),[A,P]=(0,o.useState)(!0),[k,C]=(0,o.useState)(null),[_,$]=(0,o.useState)({open:!1,message:"",severity:"success"});(0,o.useEffect)((()=>{B()}),[t]);const B=async()=>{try{P(!0);const e=await x.$.getProject(t);w(e.data)}catch(k){console.error("Error loading project:",k),C("Failed to load project. Please try again.")}finally{P(!1)}},S=()=>{$({..._,open:!1})};if(A)return(0,y.jsx)(b,{children:(0,y.jsx)(c.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,y.jsx)(i.A,{sx:{color:"black"},children:"Loading project..."})})});if(!f)return(0,y.jsx)(b,{children:(0,y.jsx)(c.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,y.jsx)(i.A,{sx:{color:"black"},children:"Project not found"})})});const T=f.owner.id===(null===n||void 0===n?void 0:n.id),q=null===(e=f.collaborators)||void 0===e?void 0:e.some((e=>e.user.id===(null===n||void 0===n?void 0:n.id)&&e.can_edit));return T||q?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(a.mg,{children:(0,y.jsx)("title",{children:"Edit Project | OneDollarAI"})}),(0,y.jsx)(b,{sx:{overflowY:"auto",pb:2,scrollbarColor:"#888 #e3e3e3"},children:(0,y.jsxs)(l.A,{maxWidth:"lg",children:[(0,y.jsxs)(c.A,{sx:{mt:3,mb:4},children:[(0,y.jsxs)(u.A,{sx:{mb:2},children:[(0,y.jsx)(d.A,{color:"inherit",href:"/projects",onClick:e=>{e.preventDefault(),r("/projects")},sx:{cursor:"pointer",color:"black"},children:"Projects"}),(0,y.jsx)(i.A,{color:"black",children:"Edit Project"})]}),(0,y.jsx)(i.A,{variant:"h2",component:"h1",gutterBottom:!0,color:"black",children:"Edit Project"}),(0,y.jsx)(i.A,{variant:"body1",color:"black",children:"Update your project information, content, and settings."})]}),(0,y.jsx)(p.A,{children:(0,y.jsx)(h.A,{children:(0,y.jsx)(m.A,{project:f,onSubmit:async e=>{try{const o=await x.$.updateProject(t,e);w(o.data),$({open:!0,message:"Project updated successfully!",severity:"success"}),setTimeout((()=>{r("/projects")}),1500)}catch(k){console.error("Error updating project:",k),$({open:!0,message:"Failed to update project",severity:"error"})}},onCancel:()=>{r("/projects")}})})})]})}),(0,y.jsx)(j.A,{open:_.open,autoHideDuration:6e3,onClose:S,children:(0,y.jsx)(g.A,{onClose:S,severity:_.severity,sx:{width:"100%"},children:_.message})})]}):(0,y.jsx)(b,{children:(0,y.jsx)(c.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,y.jsx)(i.A,{sx:{color:"black"},children:"You don't have permission to edit this project."})})})}},467:(e,t,r)=>{r.d(t,{A:()=>w});r(5043);var o=r(3516),s=r(899),a=r(2703),n=r(8903),c=r(5865),i=r(7784),l=r(3193),u=r(9190),d=r(9285),p=r(2143),h=r(4605),j=r(4598),g=r(8977),v=r(5225),x=r(8598),m=r(1473),y=r(579);const b=s.Ik({title:s.Yj().min(3,"Title must be at least 3 characters").max(200,"Title must be less than 200 characters").required("Title is required"),description:s.Yj().min(10,"Description must be at least 10 characters").max(1e3,"Description must be less than 1000 characters").required("Description is required"),project_type:s.Yj().oneOf(["code","text"],"Invalid project type").required("Project type is required"),language:s.Yj().when("project_type",{is:"code",then:e=>e.required("Language is required for code projects"),otherwise:e=>e.nullable()}),price:s.ai().min(0,"Price must be non-negative").max(9999.99,"Price must be less than $10,000"),price_per_use:s.ai().min(0,"Price per use must be non-negative").max(999.99,"Price per use must be less than $1,000"),is_public:s.zM(),content:s.Yj().min(1,"Content is required").required("Content is required")}),f={"& .MuiInputBase-root":{color:"black","& fieldset":{borderColor:"black"},"&:hover fieldset":{borderColor:"black"},"&.Mui-focused fieldset":{borderColor:"black"}},"& .MuiInputLabel-root":{color:"black","&.Mui-focused":{color:"black"}},"& .MuiFormHelperText-root":{color:"black"}},w=e=>{let{project:t,onSubmit:r,onCancel:s}=e;const w=(0,o.Wx)({initialValues:{title:(null===t||void 0===t?void 0:t.title)||"",description:(null===t||void 0===t?void 0:t.description)||"",project_type:(null===t||void 0===t?void 0:t.project_type)||"code",language:(null===t||void 0===t?void 0:t.language)||"javascript",price:(null===t||void 0===t?void 0:t.price)||0,price_per_use:(null===t||void 0===t?void 0:t.price_per_use)||.1,is_public:(null===t||void 0===t?void 0:t.is_public)||!1,content:(null===t||void 0===t?void 0:t.content)||"",usage_instructions:(null===t||void 0===t?void 0:t.usage_instructions)||""},validationSchema:b,onSubmit:e=>{r(e)}});return(0,y.jsx)(a.A,{component:"form",onSubmit:w.handleSubmit,sx:{mt:2},children:(0,y.jsxs)(n.Ay,{container:!0,spacing:3,children:[(0,y.jsx)(n.Ay,{item:!0,xs:12,children:(0,y.jsx)(c.A,{variant:"h6",gutterBottom:!0,color:"black",children:"Basic Information"})}),(0,y.jsx)(n.Ay,{item:!0,xs:12,md:8,children:(0,y.jsx)(i.A,{fullWidth:!0,name:"title",label:"Project Title",value:w.values.title,onChange:w.handleChange,onBlur:w.handleBlur,error:w.touched.title&&Boolean(w.errors.title),helperText:w.touched.title&&w.errors.title,sx:f})}),(0,y.jsx)(n.Ay,{item:!0,xs:12,md:4,children:(0,y.jsxs)(l.A,{fullWidth:!0,sx:f,children:[(0,y.jsx)(u.A,{children:"Project Type"}),(0,y.jsxs)(d.A,{name:"project_type",value:w.values.project_type,onChange:w.handleChange,onBlur:w.handleBlur,error:w.touched.project_type&&Boolean(w.errors.project_type),label:"Project Type",children:[(0,y.jsx)(p.A,{value:"code",children:(0,y.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1,color:"black"},children:[(0,y.jsx)(v.A,{fontSize:"small"}),"Code Project"]})}),(0,y.jsx)(p.A,{value:"text",children:(0,y.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1,color:"black"},children:[(0,y.jsx)(x.A,{fontSize:"small"}),"Text Project"]})})]})]})}),"code"===w.values.project_type&&(0,y.jsx)(n.Ay,{item:!0,xs:12,md:6,children:(0,y.jsxs)(l.A,{fullWidth:!0,sx:f,children:[(0,y.jsx)(u.A,{children:"Programming Language"}),(0,y.jsx)(d.A,{name:"language",value:w.values.language,onChange:w.handleChange,onBlur:w.handleBlur,error:w.touched.language&&Boolean(w.errors.language),label:"Programming Language",children:[{value:"javascript",label:"JavaScript"},{value:"python",label:"Python"},{value:"java",label:"Java"},{value:"php",label:"PHP"},{value:"go",label:"Go"},{value:"rust",label:"Rust"},{value:"sql",label:"SQL"}].map((e=>(0,y.jsx)(p.A,{value:e.value,sx:{color:"black !important","&:hover, &:active, &.active, &.Mui-selected":{color:"black !important"}},children:e.label},e.value)))})]})}),(0,y.jsx)(n.Ay,{item:!0,xs:12,children:(0,y.jsx)(i.A,{fullWidth:!0,multiline:!0,rows:3,name:"description",label:"Description",value:w.values.description,onChange:w.handleChange,onBlur:w.handleBlur,error:w.touched.description&&Boolean(w.errors.description),helperText:w.touched.description&&w.errors.description,sx:f})}),(0,y.jsx)(n.Ay,{item:!0,xs:12,children:(0,y.jsx)(c.A,{variant:"h6",gutterBottom:!0,color:"black",children:"Pricing"})}),(0,y.jsx)(n.Ay,{item:!0,xs:12,md:6,children:(0,y.jsx)(i.A,{fullWidth:!0,type:"number",name:"price",label:"One-time Purchase Price ($)",value:w.values.price,onChange:w.handleChange,onBlur:w.handleBlur,error:w.touched.price&&Boolean(w.errors.price),helperText:w.touched.price&&w.errors.price,inputProps:{min:0,step:.01},sx:f})}),(0,y.jsx)(n.Ay,{item:!0,xs:12,md:6,children:(0,y.jsx)(i.A,{fullWidth:!0,type:"number",name:"price_per_use",label:"Price per Use ($)",value:w.values.price_per_use,onChange:w.handleChange,onBlur:w.handleBlur,error:w.touched.price_per_use&&Boolean(w.errors.price_per_use),helperText:w.touched.price_per_use&&w.errors.price_per_use,inputProps:{min:0,step:.01},sx:f})}),(0,y.jsx)(n.Ay,{item:!0,xs:12,children:(0,y.jsx)(h.A,{control:(0,y.jsx)(j.A,{name:"is_public",checked:w.values.is_public,onChange:w.handleChange,sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"black","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.08)"}},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"black"}}}),label:"Make this project public",sx:{color:"black"}})}),(0,y.jsx)(n.Ay,{item:!0,xs:12,children:(0,y.jsx)(c.A,{variant:"h6",gutterBottom:!0,color:"black",children:"Project Content"})}),(0,y.jsx)(n.Ay,{item:!0,xs:12,children:(0,y.jsxs)(a.A,{sx:{height:"300px",width:"100%"},children:[(0,y.jsx)(m.A,{value:w.values.content,onChange:e=>w.setFieldValue("content",e),language:"code"===w.values.project_type?w.values.language:"javascript"}),w.touched.content&&Boolean(w.errors.content)&&(0,y.jsx)(c.A,{variant:"body2",color:"error",children:w.errors.content})]})}),(0,y.jsx)(n.Ay,{item:!0,xs:12,children:(0,y.jsx)(i.A,{fullWidth:!0,multiline:!0,rows:3,name:"usage_instructions",label:"Usage Instructions",value:w.values.usage_instructions,onChange:w.handleChange,onBlur:w.handleBlur,placeholder:"Explain how to use this project...",sx:f})}),(0,y.jsx)(n.Ay,{item:!0,xs:12,children:(0,y.jsxs)(a.A,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[s&&(0,y.jsx)(g.A,{variant:"outlined",onClick:s,sx:{color:"black",borderColor:"black","&:hover":{borderColor:"black",backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:"Cancel"}),(0,y.jsx)(g.A,{type:"submit",variant:"contained",disabled:w.isSubmitting,sx:{backgroundColor:"black",color:"white","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.8)"}},children:t?"Update Project":"Create Project"})]})})]})})}},1473:(e,t,r)=>{r.d(t,{A:()=>A});var o=r(5043),s=r(4888),a=r(1572),n=r(994),c=r(9474),i=r(7615),l=r(6837),u=r(6997),d=r(1168),p=r(3871),h=r(6526),j=r(5469),g=r(3916),v=r(5579),x=r(4932),m=r(8724),y=r(5837),b=r(7680),f=r(579);const w=e=>{let{value:t,onChange:r,language:w="javascript",readOnly:A=!1}=e;const P=(0,o.useRef)(null),k=(0,o.useRef)(null),C=(0,o.useCallback)((e=>{switch(e){case"python":return(0,m.Hg)();case"java":return(0,g.J)();case"php":return(0,x.z)();case"go":return j.T.define(h.go);case"rust":return(0,y.T)();case"sql":return(0,b.ll)();default:return(0,v.Q2)({typescript:!0})}}),[]);return(0,o.useEffect)((()=>{var e;if(!P.current)return;const o=s.Lz.updateListener.of((e=>{if(e.docChanged){const t=e.state.doc.toString();null===r||void 0===r||r(t)}})),h=n.$t.create({doc:t,extensions:[a.oQ,C(w),c.bM,(0,s.$K)(),(0,u.Lv)(),(0,s.N$)(),(0,l.b6)(),(0,s.VH)(),(0,s.A)(),n.$t.allowMultipleSelections.of(!0),(0,u.WD)(),(0,u.y9)(u.Zt),(0,u.SG)(),(0,i.wm)(),(0,i.yU)(),(0,s.D4)(),(0,s.HJ)(),(0,s.dz)(),(0,s.Wu)(),(0,p.gN)(),o,s.Lz.lineWrapping,s.w4.of([...i.Bc,...l.pw,...p.Eo,...l.cL,...u.f7,...i.OO,...d.$w])]});k.current=new s.Lz({state:h,parent:P.current});const j=null===(e=P.current)||void 0===e?void 0:e.querySelector(".cm-editor");return j&&(j.style.height="100%"),()=>{var e;null===(e=k.current)||void 0===e||e.destroy()}}),[C,w]),(0,f.jsx)("div",{ref:P,style:{border:"1px solid #ccc",flexGrow:1,height:"100%",maxHeight:"100%",overflow:"auto"}})};w.defaultProps={value:"",language:"javascript",readOnly:!1};const A=w},6961:(e,t,r)=>{r.d(t,{$:()=>c});var o=r(6213),s=r(1880);const a="https://onedollarai.com",n=o.A.create({baseURL:`${a}/api`,headers:{"Content-Type":"application/json"},withCredentials:!0});n.interceptors.request.use((async e=>{await(async()=>{try{if(s.A.get("csrftoken"))console.log("CSRF token already exists:",s.A.get("csrftoken")?"Token exists":"No token found");else{console.log("No CSRF token found, fetching a new one...");const e=await o.A.get(`${a}/api/get_csrf_token/`,{withCredentials:!0});if(200===e.status){const e=s.A.get("csrftoken");console.log("CSRF token fetched successfully:",e?"Token received":"No token set")}else console.warn("Failed to fetch CSRF token:",e.status)}}catch(e){console.error("Error fetching CSRF token:",e)}})();const t=localStorage.getItem("accessToken");t&&(e.headers.Authorization=`Bearer ${t}`);const r=s.A.get("csrftoken");return r&&(e.headers["X-CSRFToken"]=r),e}),(e=>Promise.reject(e))),n.interceptors.response.use((e=>e),(e=>{var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(localStorage.removeItem("accessToken"),window.location.href="/login"),Promise.reject(e)}));const c={getAllProjects:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await n.get("/projects/",{params:e})},getMyProjects:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await n.get("/projects/my_projects/",{params:e})},searchProjects:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await n.get("/projects/search/",{params:{q:e,...t}})},getProject:async e=>await n.get(`/projects/${e}/`),createProject:async e=>await n.post("/projects/",e),updateProject:async(e,t)=>await n.put(`/projects/${e}/`,t),deleteProject:async e=>await n.delete(`/projects/${e}/`),runProject:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await n.post(`/projects/${e}/run/`,t)},buyProject:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await n.post(`/projects/${e}/buy/`,t)},trackProjectView:async e=>await n.post(`/projects/${e}/view/`),getProjectAnalytics:async e=>await n.get(`/projects/${e}/analytics/`),getCollaborators:async e=>await n.get(`/projects/${e}/collaborators/`),addCollaborator:async(e,t)=>await n.post(`/projects/${e}/add_collaborator/`,t),removeCollaborator:async(e,t)=>await n.post(`/projects/${e}/remove_collaborator/`,{user_id:t}),submitVersionForReview:async(e,t)=>await n.post(`/projects/${e}/submit_version_for_review/`,t),getPendingVersions:async e=>await n.get(`/projects/${e}/pending_versions/`),promoteVersionToPublic:async(e,t)=>await n.post(`/projects/${e}/versions/${t}/promote_to_public/`),getProjectVersions:async e=>await n.get(`/projects/${e}/versions/`),createProjectVersion:async(e,t)=>await n.post(`/projects/${e}/versions/`,t),updateProjectVersion:async(e,t,r)=>await n.put(`/projects/${e}/versions/${t}/`,r),deleteProjectVersion:async(e,t)=>await n.delete(`/projects/${e}/versions/${t}/`),approveProjectVersion:async(e,t)=>await n.post(`/projects/${e}/versions/${t}/approve/`),rejectProjectVersion:async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return await n.post(`/projects/${e}/versions/${t}/reject/`,{reason:r})},analyzeComputingResources:async(e,t)=>await n.post(`/projects/${e}/computing-resources/`,{code:t}),getComputingResources:async e=>await n.get(`/projects/${e}/computing-resources/`),updateComputingResources:async(e,t,r)=>await n.put(`/projects/${e}/computing-resources/${t}/`,r),getAllProjectsAdmin:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await n.get("/projects/admin/projects/",{params:e})},getAdminAnalytics:async()=>await n.get("/projects/admin/projects/analytics/"),approveProject:async e=>await n.post(`/projects/admin/projects/${e}/approve/`),rejectProject:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return await n.post(`/projects/admin/projects/${e}/reject/`,{reason:t})},getProjectUsage:async e=>await n.get(`/projects/${e}/usage/`),getUserProjectUsage:async e=>await n.get(`/projects/${e}/user_usage/`),getUserUsage:async e=>await n.get(`/projects/${e}/user_usage/`),getPendingVersions:async e=>await n.get(`/projects/${e}/pending_versions/`),approveVersion:async(e,t)=>await n.post(`/projects/${e}/versions/${t}/approve/`),rejectVersion:async(e,t,r)=>await n.post(`/projects/${e}/versions/${t}/reject/`,{reason:r}),submitVersionForReview:async(e,t)=>await n.post(`/projects/${e}/submit_version_for_review/`,t),submitForReview:async(e,t)=>await n.post(`/projects/${e}/submit_for_review/`,t),getPublicProject:async e=>await n.get(`/projects/public/${e}/`),getPrivateProject:async e=>await n.get(`/projects/private/${e}/`),executeCode:async(e,t)=>await n.post("/projects/execute-code/",{code:e,language:t}),advancedSearch:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{query:t="",projectType:r="",language:o="",minPrice:s="",maxPrice:a="",sortBy:c="created_at",sortOrder:i="desc"}=e,l={q:t,type:r,language:o,min_price:s,max_price:a,sort_by:c,sort_order:i};return await n.get("/projects/search/",{params:l})}}}}]);
//# sourceMappingURL=290.7bdec3a5.chunk.js.map