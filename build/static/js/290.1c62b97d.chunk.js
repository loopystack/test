"use strict";(self.webpackChunkOneDollarAI=self.webpackChunkOneDollarAI||[]).push([[290],{290:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var o=r(5043),s=r(6971),i=r(9490),n=r(4535),l=r(2703),c=r(5865),d=r(5381),a=r(2698),u=r(8446),h=r(2110),j=r(6494),p=r(794),x=r(4194),v=r(4528),f=r(6961),m=r(467),g=r(579);const A=(0,n.Ay)(l.A)((e=>{let{theme:t}=e;return{display:"flex",width:"100%",flexDirection:"column",height:`calc(100dvh - ${t.header.mobileHeight})`,[t.breakpoints.up("md")]:{height:`calc(100dvh - ${t.header.height})`}}})),y=()=>{var e;const{projectId:t}=(0,s.g)(),r=(0,s.Zp)(),{user:n}=(0,v.As)(),[y,b]=(0,o.useState)(null),[k,P]=(0,o.useState)(!0),[w,C]=(0,o.useState)(null),[I,D]=(0,o.useState)({open:!1,message:"",severity:"success"});(0,o.useEffect)((()=>{E()}),[t]);const E=async()=>{try{P(!0);const e=(null===n||void 0===n?void 0:n.is_staff)||(null===n||void 0===n?void 0:n.is_superuser)?await f.$.getProjectAdmin(t):await f.$.getProject(t);b(e.data)}catch(w){console.error("Error loading project:",w),C("Failed to load project. Please try again.")}finally{P(!1)}},$=()=>{D({...I,open:!1})};if(k)return(0,g.jsx)(A,{children:(0,g.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,g.jsx)(c.A,{sx:{color:"black"},children:"Loading project..."})})});if(!y)return(0,g.jsx)(A,{children:(0,g.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,g.jsx)(c.A,{sx:{color:"black"},children:"Project not found"})})});const _=y.owner.id===(null===n||void 0===n?void 0:n.id),S=null===(e=y.collaborators)||void 0===e?void 0:e.some((e=>e.user.id===(null===n||void 0===n?void 0:n.id)&&e.role in["editor","admin"])),F=(null===n||void 0===n?void 0:n.is_staff)||(null===n||void 0===n?void 0:n.is_superuser);return _||S||F?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i.mg,{children:(0,g.jsx)("title",{children:"Edit Project | OneDollarAI"})}),(0,g.jsx)(A,{sx:{overflowY:"auto",pb:2,scrollbarColor:"#888 #e3e3e3"},children:(0,g.jsxs)(d.A,{maxWidth:"lg",children:[(0,g.jsxs)(l.A,{sx:{mt:3,mb:4},children:[(0,g.jsxs)(a.A,{sx:{mb:2},children:[(0,g.jsx)(u.A,{color:"inherit",href:"/projects",onClick:e=>{e.preventDefault(),r("/projects")},sx:{cursor:"pointer",color:"black"},children:"Projects"}),(0,g.jsx)(c.A,{color:"black",children:"Edit Project"})]}),(0,g.jsx)(c.A,{variant:"h2",component:"h1",gutterBottom:!0,color:"black",children:"Edit Project"}),(0,g.jsx)(c.A,{variant:"body1",color:"black",children:"Update your project information, content, and settings."})]}),(0,g.jsx)(h.A,{children:(0,g.jsx)(j.A,{children:(0,g.jsx)(m.A,{project:y,onSubmit:async e=>{try{const o=(null===n||void 0===n?void 0:n.is_staff)||(null===n||void 0===n?void 0:n.is_superuser)?await f.$.updateProjectAdmin(t,e):await f.$.updateProject(t,e);b(o.data),D({open:!0,message:"Project updated successfully!",severity:"success"}),setTimeout((()=>{r("/projects")}),1500)}catch(w){console.error("Error updating project:",w),D({open:!0,message:"Failed to update project",severity:"error"})}},onCancel:()=>{r("/projects")}})})})]})}),(0,g.jsx)(p.A,{open:I.open,autoHideDuration:6e3,onClose:$,children:(0,g.jsx)(x.A,{onClose:$,severity:I.severity,sx:{width:"100%"},children:I.message})})]}):(0,g.jsx)(A,{children:(0,g.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,g.jsx)(c.A,{sx:{color:"black"},children:"You don't have permission to edit this project."})})})}}}]);
//# sourceMappingURL=290.1c62b97d.chunk.js.map