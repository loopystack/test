{"version":3,"file":"static/js/290.fa377dfd.chunk.js","mappings":"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","sources":["content/applications/Projects/ProjectEdit.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport {\r\n    Alert,\r\n    Box,\r\n    Breadcrumbs,\r\n    Card,\r\n    CardContent,\r\n    Container,\r\n    Link,\r\n    Typography,\r\n    styled,\r\n    Snackbar\r\n} from '@mui/material';\r\nimport { useAuth } from 'src/contexts/AuthContext';\r\nimport { projectService } from 'src/services/projectService';\r\nimport ProjectForm from './components/ProjectForm';\r\n\r\nconst RootWrapper = styled(Box)(({ theme }) => ({\r\n    display: \"flex\",\r\n    width: '100%',\r\n    flexDirection: 'column',\r\n    height: `calc(100dvh - ${theme.header.mobileHeight})`,\r\n    [theme.breakpoints.up(\"md\")]: {\r\n        height: `calc(100dvh - ${theme.header.height})`\r\n    }\r\n}));\r\n\r\n\r\nconst ProjectEdit = () => {\r\n    const { projectId } = useParams();\r\n    const navigate = useNavigate();\r\n    const { user } = useAuth();\r\n\r\n    const [project, setProject] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [snackbar, setSnackbar] = useState({\r\n        open: false,\r\n        message: '',\r\n        severity: 'success'\r\n    });\r\n\r\n    useEffect(() => {\r\n        loadProject();\r\n    }, [projectId]);\r\n\r\n    const loadProject = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const response = await projectService.getProject(projectId);\r\n            setProject(response.data);\r\n        } catch (error) {\r\n            console.error('Error loading project:', error);\r\n            setError('Failed to load project. Please try again.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleUpdateProject = async (projectData) => {\r\n        try {\r\n            const response = await projectService.updateProject(\r\n                projectId,\r\n                projectData\r\n            );\r\n            setProject(response.data);\r\n            setSnackbar({\r\n                open: true,\r\n                message: 'Project updated successfully!',\r\n                severity: 'success'\r\n            });\r\n\r\n            // Navigate back to projects list after a short delay\r\n            setTimeout(() => {\r\n                navigate('/projects');\r\n            }, 1500);\r\n        } catch (error) {\r\n            console.error('Error updating project:', error);\r\n            setSnackbar({\r\n                open: true,\r\n                message: 'Failed to update project',\r\n                severity: 'error'\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleCancel = () => {\r\n        navigate('/projects');\r\n    };\r\n\r\n    const handleSnackbarClose = () => {\r\n        setSnackbar({ ...snackbar, open: false });\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <RootWrapper>\r\n                <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100%' }}>\r\n                    <Typography sx={{ color: 'black' }}>Loading project...</Typography>\r\n                </Box>\r\n            </RootWrapper>\r\n        );\r\n    }\r\n\r\n    if (!project) {\r\n        return (\r\n            <RootWrapper>\r\n                <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100%' }}>\r\n                    <Typography sx={{ color: 'black' }}>Project not found</Typography>\r\n                </Box>\r\n            </RootWrapper>\r\n        );\r\n    }\r\n\r\n    const isOwner = project.owner.id === user?.id;\r\n    const isCollaborator = project.collaborators?.some(\r\n        (collab) => collab.user.id === user?.id && collab.can_edit\r\n    );\r\n\r\n    if (!isOwner && !isCollaborator) {\r\n        return (\r\n            <RootWrapper>\r\n                <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100%' }}>\r\n                    <Typography sx={{ color: 'black' }}>You don't have permission to edit this project.</Typography>\r\n                </Box>\r\n            </RootWrapper>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <title>Edit Project | OneDollarAI</title>\r\n            </Helmet>\r\n\r\n            <RootWrapper sx={{ overflowY: 'auto', pb: 2, scrollbarColor: '#888 #e3e3e3' }}>\r\n                <Container maxWidth=\"lg\">\r\n                    <Box sx={{ mt: 3, mb: 4 }}>\r\n                        {/* Breadcrumbs */}\r\n                        <Breadcrumbs sx={{ mb: 2 }}>\r\n                            <Link\r\n                                color=\"inherit\"\r\n                                href=\"/projects\"\r\n                                onClick={(e) => {\r\n                                    e.preventDefault();\r\n                                    navigate('/projects');\r\n                                }}\r\n                                sx={{ cursor: 'pointer', color: 'black' }}\r\n                            >\r\n                                Projects\r\n                            </Link>\r\n                            <Typography color=\"black\">\r\n                                Edit Project\r\n                            </Typography>\r\n                        </Breadcrumbs>\r\n\r\n                        <Typography variant=\"h2\" component=\"h1\" gutterBottom color=\"black\">\r\n                            Edit Project\r\n                        </Typography>\r\n                        <Typography variant=\"body1\" color=\"black\">\r\n                            Update your project information, content, and settings.\r\n                        </Typography>\r\n                    </Box>\r\n\r\n                    <Card>\r\n                        <CardContent>\r\n                            <ProjectForm\r\n                                project={project}\r\n                                onSubmit={handleUpdateProject}\r\n                                onCancel={handleCancel}\r\n                            />\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                </Container>\r\n            </RootWrapper>\r\n\r\n            <Snackbar\r\n                open={snackbar.open}\r\n                autoHideDuration={6000}\r\n                onClose={handleSnackbarClose}\r\n            >\r\n                <Alert\r\n                    onClose={handleSnackbarClose}\r\n                    severity={snackbar.severity}\r\n                    sx={{ width: '100%' }}\r\n                >\r\n                    {snackbar.message}\r\n                </Alert>\r\n            </Snackbar>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ProjectEdit; "],"names":["RootWrapper","styled","Box","_ref","theme","display","width","flexDirection","height","header","mobileHeight","breakpoints","up","ProjectEdit","_project$collaborator","projectId","useParams","navigate","useNavigate","user","useAuth","project","setProject","useState","loading","setLoading","error","setError","snackbar","setSnackbar","open","message","severity","useEffect","loadProject","async","response","projectService","getProject","data","console","handleSnackbarClose","_jsx","children","sx","justifyContent","alignItems","Typography","color","isOwner","owner","id","isCollaborator","collaborators","some","collab","can_edit","_jsxs","_Fragment","Helmet","overflowY","pb","scrollbarColor","Container","maxWidth","mt","mb","Breadcrumbs","Link","href","onClick","e","preventDefault","cursor","variant","component","gutterBottom","Card","CardContent","ProjectForm","onSubmit","updateProject","projectData","setTimeout","onCancel","handleCancel","Snackbar","autoHideDuration","onClose","Alert"],"sourceRoot":""}