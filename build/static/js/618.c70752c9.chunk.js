"use strict";(self.webpackChunkOneDollarAI=self.webpackChunkOneDollarAI||[]).push([[618],{2618:(e,s,r)=>{r.r(s),r.d(s,{default:()=>X});var t=r(5043),o=r(6971),c=r(9490),a=r(5381),n=r(2703),i=r(611),l=r(5865),x=r(4194),j=r(8977),d=r(2110),p=r(6494),u=r(3845),h=r(1045),y=r(4669),A=r(4056),m=r(8903),g=r(5721),b=r(681),v=r(2050),k=r(8734),w=r(3336),f=r(35),P=r(6600),$=r(5316),_=r(9347),C=r(794),I=r(5225),T=r(8598),S=r(7332),V=r(3637),R=r(6225),F=r(9893),B=r(9010),L=r(4593),M=r(1007),U=r(7795),E=r(9215),O=r(3632),W=r(7012),z=r(4528),D=r(6961),N=r(955),q=r(4115),H=r(5772),G=r(579);const X=()=>{const{projectId:e}=(0,o.g)(),s=(0,o.Zp)(),{user:r}=(0,z.As)(),[X,Z]=(0,t.useState)(null),[J,K]=(0,t.useState)(!0),[Q,Y]=(0,t.useState)(null),[ee,se]=(0,t.useState)(0),[re,te]=(0,t.useState)(!1),[oe,ce]=(0,t.useState)("one_time"),[ae,ne]=(0,t.useState)({open:!1,message:"",severity:"success"});(0,t.useEffect)((()=>{ie()}),[e]);const ie=async()=>{try{K(!0),Y(null);const s=await D.$.getPublicProject(e);Z(s.data),await D.$.trackProjectView(e)}catch(Q){console.error("Error loading project:",Q),Y("Failed to load project. Please try again.")}finally{K(!1)}},le=(null===X||void 0===X?void 0:X.latest_public_version)||(null===X||void 0===X?void 0:X.latest_private_version);return J?(0,G.jsx)(a.A,{maxWidth:"lg",children:(0,G.jsxs)(n.A,{sx:{mt:4,textAlign:"center"},children:[(0,G.jsx)(i.A,{sx:{mb:2}}),(0,G.jsx)(l.A,{variant:"h6",sx:{color:"black"},children:"Loading project..."})]})}):Q?(0,G.jsx)(a.A,{maxWidth:"lg",children:(0,G.jsxs)(n.A,{sx:{mt:4},children:[(0,G.jsx)(x.A,{severity:"error",sx:{color:"black"},children:Q}),(0,G.jsx)(j.A,{startIcon:(0,G.jsx)(S.A,{}),onClick:()=>s("/projects"),sx:{mt:2,color:"black"},children:"Back to Projects"})]})}):X?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(c.mg,{children:(0,G.jsxs)("title",{children:[X.title," - OneDollarAI"]})}),(0,G.jsxs)(a.A,{maxWidth:"lg",children:[(0,G.jsx)(n.A,{sx:{mt:3,mb:2},children:(0,G.jsx)(j.A,{startIcon:(0,G.jsx)(S.A,{}),onClick:()=>s("/projects"),sx:{color:"black"},children:"Back to Projects"})}),(0,G.jsx)(d.A,{sx:{mb:3},children:(0,G.jsxs)(p.A,{children:[(0,G.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[(0,G.jsxs)(n.A,{children:[(0,G.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(e=>{switch(e){case"code":default:return(0,G.jsx)(I.A,{sx:{color:"black"}});case"text":return(0,G.jsx)(T.A,{sx:{color:"black"}})}})(X.project_type),(0,G.jsx)(l.A,{variant:"h4",component:"h1",sx:{color:"black"},children:X.title}),(0,G.jsx)(u.A,{icon:(0,G.jsx)(V.A,{}),label:"Public",color:"primary",size:"small"})]}),(0,G.jsx)(l.A,{variant:"body1",sx:{mb:2,color:"black"},children:X.description})]}),(0,G.jsx)(n.A,{sx:{display:"flex",gap:1},children:(0,G.jsx)(u.A,{icon:(0,G.jsx)(R.A,{}),label:X.status,color:(e=>{switch(e){case"approved":return"success";case"pending":return"warning";case"rejected":return"error";default:return"default"}})(X.status),variant:"outlined"})})]}),(0,G.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[(0,G.jsx)(h.A,{sx:{width:32,height:32},children:X.owner.avatar?(0,G.jsx)("img",{src:X.owner.avatar,alt:X.owner.first_name}):(0,G.jsx)(F.A,{fontSize:"small"})}),(0,G.jsxs)(l.A,{variant:"body2",sx:{color:"black"},children:["by ",X.owner.first_name," ",X.owner.last_name]})]}),(0,G.jsxs)(n.A,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[X.price>0&&(0,G.jsxs)(j.A,{variant:"contained",color:"warning",startIcon:(0,G.jsx)(B.A,{}),onClick:()=>te(!0),sx:{backgroundColor:"#ff9800",color:"white"},children:["Buy for $",X.price]}),(0,G.jsx)(j.A,{variant:"outlined",startIcon:(0,G.jsx)(L.A,{}),onClick:()=>{r?s(`/project/${e}/run`):ne({open:!0,message:"Please log in to run this project",severity:"warning"})},sx:{color:"black",borderColor:"black"},children:"Try Project"}),r&&(0,G.jsx)(j.A,{variant:"outlined",startIcon:(0,G.jsx)(M.A,{}),onClick:()=>{r?s(`/project/${e}`):ne({open:!0,message:"Please log in to view the private version",severity:"warning"})},sx:{color:"black",borderColor:"black"},children:"View Private Version"})]})]})}),(0,G.jsx)(d.A,{children:(0,G.jsxs)(p.A,{children:[(0,G.jsx)(n.A,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:(0,G.jsxs)(y.A,{value:ee,onChange:(e,s)=>{se(s)},children:[(0,G.jsx)(A.A,{label:"Overview",sx:{color:"black"}}),(0,G.jsx)(A.A,{label:"Content",sx:{color:"black"}}),(0,G.jsx)(A.A,{label:"Examples",sx:{color:"black"}}),(0,G.jsx)(A.A,{label:"Analytics",sx:{color:"black"}})]})}),(0,G.jsxs)(n.A,{sx:{mt:2},children:[0===ee&&(0,G.jsxs)(m.Ay,{container:!0,spacing:3,children:[(0,G.jsxs)(m.Ay,{item:!0,xs:12,md:6,children:[(0,G.jsx)(l.A,{variant:"h6",gutterBottom:!0,sx:{color:"black"},children:"Project Information"}),(0,G.jsxs)(g.A,{children:[(0,G.jsxs)(b.Ay,{children:[(0,G.jsx)(v.A,{children:(0,G.jsx)(I.A,{sx:{color:"black"}})}),(0,G.jsx)(k.A,{primary:"Type",secondary:X.project_type,sx:{"& .MuiListItemText-primary":{color:"black"}}})]}),X.language&&(0,G.jsxs)(b.Ay,{children:[(0,G.jsx)(v.A,{children:(0,G.jsx)(I.A,{sx:{color:"black"}})}),(0,G.jsx)(k.A,{primary:"Language",secondary:X.language,sx:{"& .MuiListItemText-primary":{color:"black"}}})]}),(0,G.jsxs)(b.Ay,{children:[(0,G.jsx)(v.A,{children:(0,G.jsx)(U.A,{sx:{color:"black"}})}),(0,G.jsx)(k.A,{primary:"Created",secondary:(0,H.A)(new Date(X.created_at),{addSuffix:!0}),sx:{"& .MuiListItemText-primary":{color:"black"}}})]})]})]}),(0,G.jsxs)(m.Ay,{item:!0,xs:12,md:6,children:[(0,G.jsx)(l.A,{variant:"h6",gutterBottom:!0,sx:{color:"black"},children:"Pricing & Usage"}),(0,G.jsxs)(g.A,{children:[(0,G.jsxs)(b.Ay,{children:[(0,G.jsx)(v.A,{children:(0,G.jsx)(B.A,{sx:{color:"black"}})}),(0,G.jsx)(k.A,{primary:"One-time Purchase",secondary:`$${X.price}`,sx:{"& .MuiListItemText-primary":{color:"black"}}})]}),(0,G.jsxs)(b.Ay,{children:[(0,G.jsx)(v.A,{children:(0,G.jsx)(L.A,{sx:{color:"black"}})}),(0,G.jsx)(k.A,{primary:"Per-use Charge",secondary:`$${X.price_per_use}`,sx:{"& .MuiListItemText-primary":{color:"black"}}})]}),X.computing_resources&&X.computing_resources.length>0&&(0,G.jsxs)(b.Ay,{children:[(0,G.jsx)(v.A,{children:(0,G.jsx)(E.A,{sx:{color:"black"}})}),(0,G.jsx)(k.A,{primary:"Cost per Run",secondary:`$${X.computing_resources[0].estimated_cost_per_run}`,sx:{"& .MuiListItemText-primary":{color:"black"}}})]})]})]})]}),1===ee&&(0,G.jsxs)(n.A,{children:[(0,G.jsx)(l.A,{variant:"h6",gutterBottom:!0,sx:{color:"black"},children:"Project Content"}),null!==le&&void 0!==le&&le.content?(0,G.jsx)(w.A,{sx:{p:2,backgroundColor:"#f5f5f5",fontFamily:"monospace",whiteSpace:"pre-wrap",overflow:"auto",maxHeight:"400px"},children:"code"===X.project_type?(0,G.jsx)("div",{style:{color:"black"},children:(0,G.jsx)(N.oz,{rehypePlugins:[q.A],children:le.content})}):(0,G.jsx)(l.A,{variant:"body1",sx:{color:"black"},children:le.content})}):(0,G.jsx)(l.A,{sx:{color:"black"},children:"No content available in public version."})]}),2===ee&&(0,G.jsxs)(n.A,{children:[(0,G.jsx)(l.A,{variant:"h6",gutterBottom:!0,sx:{color:"black"},children:"Usage Examples"}),null!==le&&void 0!==le&&le.examples&&le.examples.length>0?(0,G.jsx)(g.A,{children:le.examples.map(((e,s)=>(0,G.jsxs)(b.Ay,{divider:!0,children:[(0,G.jsx)(v.A,{children:(0,G.jsx)(I.A,{sx:{color:"black"}})}),(0,G.jsx)(k.A,{primary:e.title||`Example ${s+1}`,secondary:(0,G.jsxs)(n.A,{children:[(0,G.jsx)(l.A,{variant:"body2",sx:{color:"black",mb:1},children:e.description}),e.code&&(0,G.jsx)(w.A,{sx:{p:1,backgroundColor:"#f8f9fa",fontFamily:"monospace",fontSize:"0.875rem"},children:(0,G.jsx)("pre",{style:{margin:0,color:"black"},children:e.code})})]}),sx:{"& .MuiListItemText-primary":{color:"black"}}})]},s)))}):(0,G.jsx)(l.A,{sx:{color:"black"},children:"No examples available."})]}),3===ee&&(0,G.jsxs)(m.Ay,{container:!0,spacing:3,children:[(0,G.jsxs)(m.Ay,{item:!0,xs:12,md:6,children:[(0,G.jsx)(l.A,{variant:"h6",gutterBottom:!0,sx:{color:"black"},children:"Project Analytics"}),(0,G.jsxs)(g.A,{children:[(0,G.jsxs)(b.Ay,{children:[(0,G.jsx)(v.A,{children:(0,G.jsx)(O.A,{sx:{color:"black"}})}),(0,G.jsx)(k.A,{primary:"Total Views",secondary:X.total_views||0,sx:{"& .MuiListItemText-primary":{color:"black"}}})]}),(0,G.jsxs)(b.Ay,{children:[(0,G.jsx)(v.A,{children:(0,G.jsx)(L.A,{sx:{color:"black"}})}),(0,G.jsx)(k.A,{primary:"Total Runs",secondary:X.total_runs||0,sx:{"& .MuiListItemText-primary":{color:"black"}}})]}),(0,G.jsxs)(b.Ay,{children:[(0,G.jsx)(v.A,{children:(0,G.jsx)(B.A,{sx:{color:"black"}})}),(0,G.jsx)(k.A,{primary:"Total Purchases",secondary:X.total_purchases||0,sx:{"& .MuiListItemText-primary":{color:"black"}}})]}),X.total_revenue>0&&(0,G.jsxs)(b.Ay,{children:[(0,G.jsx)(v.A,{children:(0,G.jsx)(W.A,{sx:{color:"black"}})}),(0,G.jsx)(k.A,{primary:"Total Revenue",secondary:`$${X.total_revenue}`,sx:{"& .MuiListItemText-primary":{color:"black"}}})]})]})]}),(0,G.jsxs)(m.Ay,{item:!0,xs:12,md:6,children:[(0,G.jsx)(l.A,{variant:"h6",gutterBottom:!0,sx:{color:"black"},children:"Project Status"}),(0,G.jsx)(x.A,{severity:"info",sx:{color:"black"},children:(0,G.jsx)(l.A,{variant:"body2",children:"This is a public project that can be viewed and used by anyone. To access the full features and private version, consider purchasing the project."})})]})]})]})]})}),(0,G.jsxs)(f.A,{open:re,onClose:()=>te(!1),maxWidth:"sm",fullWidth:!0,children:[(0,G.jsx)(P.A,{sx:{color:"black"},children:"Purchase Project"}),(0,G.jsxs)($.A,{children:[(0,G.jsxs)(l.A,{variant:"body1",sx:{mb:2,color:"black"},children:['Choose your purchase option for "',X.title,'":']}),(0,G.jsxs)(n.A,{sx:{mb:2},children:[(0,G.jsxs)(l.A,{variant:"h6",sx:{color:"black",mb:1},children:["One-time Purchase: $",X.price]}),(0,G.jsx)(l.A,{variant:"body2",sx:{color:"black",mb:2},children:"Get unlimited access to this project forever."}),(0,G.jsxs)(l.A,{variant:"h6",sx:{color:"black",mb:1},children:["Per-use Billing: $",X.price_per_use," per use"]}),(0,G.jsx)(l.A,{variant:"body2",sx:{color:"black"},children:"Pay only when you use the project."})]})]}),(0,G.jsxs)(_.A,{children:[(0,G.jsx)(j.A,{onClick:()=>te(!1),sx:{color:"black"},children:"Cancel"}),(0,G.jsx)(j.A,{onClick:async()=>{if(r)try{await D.$.buyProject(e,{purchase_type:oe}),ne({open:!0,message:"Project purchased successfully!",severity:"success"}),te(!1),ie()}catch(Q){var s,t;console.error("Error buying project:",Q),ne({open:!0,message:(null===(s=Q.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.error)||"Failed to purchase project",severity:"error"})}else ne({open:!0,message:"Please log in to purchase this project",severity:"warning"})},variant:"contained",color:"warning",startIcon:(0,G.jsx)(B.A,{}),sx:{backgroundColor:"#ff9800",color:"white"},children:"Purchase"})]})]}),(0,G.jsx)(C.A,{open:ae.open,autoHideDuration:6e3,onClose:()=>ne({...ae,open:!1}),children:(0,G.jsx)(x.A,{onClose:()=>ne({...ae,open:!1}),severity:ae.severity,sx:{width:"100%"},children:ae.message})})]})]}):(0,G.jsx)(a.A,{maxWidth:"lg",children:(0,G.jsxs)(n.A,{sx:{mt:4},children:[(0,G.jsx)(x.A,{severity:"warning",sx:{color:"black"},children:"Project not found or not public"}),(0,G.jsx)(j.A,{startIcon:(0,G.jsx)(S.A,{}),onClick:()=>s("/projects"),sx:{mt:2,color:"black"},children:"Back to Projects"})]})})}},6961:(e,s,r)=>{r.d(s,{$:()=>n});var t=r(6213),o=r(1880);const c="https://onedollarai.com",a=t.A.create({baseURL:`${c}/api`,headers:{"Content-Type":"application/json"},withCredentials:!0});a.interceptors.request.use((async e=>{await(async()=>{try{if(o.A.get("csrftoken"))console.log("CSRF token already exists:",o.A.get("csrftoken")?"Token exists":"No token found");else{console.log("No CSRF token found, fetching a new one...");const e=await t.A.get(`${c}/api/get_csrf_token/`,{withCredentials:!0});if(200===e.status){const e=o.A.get("csrftoken");console.log("CSRF token fetched successfully:",e?"Token received":"No token set")}else console.warn("Failed to fetch CSRF token:",e.status)}}catch(e){console.error("Error fetching CSRF token:",e)}})();const s=localStorage.getItem("accessToken");s&&(e.headers.Authorization=`Bearer ${s}`);const r=o.A.get("csrftoken");return r&&(e.headers["X-CSRFToken"]=r),e}),(e=>Promise.reject(e))),a.interceptors.response.use((e=>e),(e=>{var s;return 401===(null===(s=e.response)||void 0===s?void 0:s.status)&&(localStorage.removeItem("accessToken"),window.location.href="/login"),Promise.reject(e)}));const n={getAllProjects:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await a.get("/projects/",{params:e})},getMyProjects:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await a.get("/projects/my_projects/",{params:e})},searchProjects:async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await a.get("/projects/search/",{params:{q:e,...s}})},getProject:async e=>await a.get(`/projects/${e}/`),createProject:async e=>await a.post("/projects/",e),updateProject:async(e,s)=>await a.put(`/projects/${e}/`,s),deleteProject:async e=>await a.delete(`/projects/${e}/`),runProject:async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await a.post(`/projects/${e}/run/`,s)},buyProject:async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await a.post(`/projects/${e}/buy/`,s)},trackProjectView:async e=>await a.post(`/projects/${e}/view/`),getProjectAnalytics:async e=>await a.get(`/projects/${e}/analytics/`),getCollaborators:async e=>await a.get(`/projects/${e}/collaborators/`),addCollaborator:async(e,s)=>await a.post(`/projects/${e}/add_collaborator/`,s),removeCollaborator:async(e,s)=>await a.post(`/projects/${e}/remove_collaborator/`,{user_id:s}),submitVersionForReview:async(e,s)=>await a.post(`/projects/${e}/submit_version_for_review/`,s),getPendingVersions:async e=>await a.get(`/projects/${e}/pending_versions/`),promoteVersionToPublic:async(e,s)=>await a.post(`/projects/${e}/versions/${s}/promote_to_public/`),getProjectVersions:async e=>await a.get(`/projects/${e}/versions/`),createProjectVersion:async(e,s)=>await a.post(`/projects/${e}/versions/`,s),updateProjectVersion:async(e,s,r)=>await a.put(`/projects/${e}/versions/${s}/`,r),deleteProjectVersion:async(e,s)=>await a.delete(`/projects/${e}/versions/${s}/`),approveProjectVersion:async(e,s)=>await a.post(`/projects/${e}/versions/${s}/approve/`),rejectProjectVersion:async function(e,s){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return await a.post(`/projects/${e}/versions/${s}/reject/`,{reason:r})},analyzeComputingResources:async(e,s)=>await a.post(`/projects/${e}/computing-resources/`,{code:s}),getComputingResources:async e=>await a.get(`/projects/${e}/computing-resources/`),updateComputingResources:async(e,s,r)=>await a.put(`/projects/${e}/computing-resources/${s}/`,r),getAllProjectsAdmin:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await a.get("/projects/admin/projects/",{params:e})},getAdminAnalytics:async()=>await a.get("/projects/admin/projects/analytics/"),approveProject:async e=>await a.post(`/projects/admin/projects/${e}/approve/`),rejectProject:async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return await a.post(`/projects/admin/projects/${e}/reject/`,{reason:s})},getProjectUsage:async e=>await a.get(`/projects/${e}/usage/`),getUserProjectUsage:async e=>await a.get(`/projects/${e}/user_usage/`),getUserUsage:async e=>await a.get(`/projects/${e}/user_usage/`),getPendingVersions:async e=>await a.get(`/projects/${e}/pending_versions/`),approveVersion:async(e,s)=>await a.post(`/projects/${e}/versions/${s}/approve/`),rejectVersion:async(e,s,r)=>await a.post(`/projects/${e}/versions/${s}/reject/`,{reason:r}),submitVersionForReview:async(e,s)=>await a.post(`/projects/${e}/submit_version_for_review/`,s),submitForReview:async(e,s)=>await a.post(`/projects/${e}/submit_for_review/`,s),getPublicProject:async e=>await a.get(`/projects/public/${e}/`),getPrivateProject:async e=>await a.get(`/projects/private/${e}/`),executeCode:async(e,s)=>await a.post("/projects/execute-code/",{code:e,language:s}),advancedSearch:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{query:s="",projectType:r="",language:t="",minPrice:o="",maxPrice:c="",sortBy:n="created_at",sortOrder:i="desc"}=e,l={q:s,type:r,language:t,min_price:o,max_price:c,sort_by:n,sort_order:i};return await a.get("/projects/search/",{params:l})}}}}]);
//# sourceMappingURL=618.c70752c9.chunk.js.map