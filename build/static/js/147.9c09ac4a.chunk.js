"use strict";(self.webpackChunkOneDollarAI=self.webpackChunkOneDollarAI||[]).push([[147],{5147:(e,r,t)=>{t.r(r),t.d(r,{default:()=>Y});var o=t(5043),a=t(4535),n=t(2703),l=t(5857),i=t(5865),s=t(7392),c=t(2143),d=t(9285),u=t(5381),p=t(8977),h=t(3336),x=t(6240),g=t(4194),b=t(2110),f=t(6494),m=t(1637),A=t(7784),y=t(8527),k=t(8903),j=t(3193),w=t(8789),v=t(4469),C=t(9704),S=t(3959),E=t(4914),D=t(155),F=t(1132),P=t(146),R=t(5007),_=t(8625),I=t(8606),X=t(9490),M=t(579);(0,a.Ay)(n.A)((e=>{let{theme:r}=e;return`\n        padding: ${r.spacing(4)};\n`}));var N=t(6213),O=t(1880),T=t(4528),W=t(4556),z=t(424),$=t(3538);const L=(0,a.Ay)(n.A)((e=>{let{theme:r}=e;return{"& .MuiSvgIcon-root":{color:"black"}}})),U=e=>{let{src:r,filename:t}=e;const a=(0,o.useRef)(null),[c,d]=(0,o.useState)(!1),[u,p]=(0,o.useState)(!1),[h,x]=(0,o.useState)(0),[g,b]=(0,o.useState)(0),f=e=>{const r=Math.floor(e/60),t=Math.floor(e%60);return`${r}:${t<10?"0":""}${t}`};return(0,M.jsxs)(n.A,{sx:{width:"100%"},children:[(0,M.jsx)("audio",{ref:a,src:r,onTimeUpdate:()=>{a.current&&b(a.current.currentTime)},onLoadedMetadata:()=>{a.current&&(x(a.current.duration),p(!1))},onError:e=>{console.error("Audio error:",e),p(!0),d(!1)},onEnded:()=>d(!1),style:{display:"none"}}),u?(0,M.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:1,borderRadius:1,bgcolor:(0,l.X4)("#f44336",.1)},children:[(0,M.jsx)(i.A,{variant:"body2",color:"error",children:"Error loading audio"}),(0,M.jsx)(L,{children:(0,M.jsx)(s.A,{size:"small",color:"primary",onClick:()=>{p(!1),a.current&&a.current.load()},children:(0,M.jsx)(_.A,{fontSize:"small"})})})]}):(0,M.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,M.jsx)(L,{children:(0,M.jsx)(s.A,{onClick:()=>{a.current&&(c?a.current.pause():a.current.play().catch((e=>{console.error("Audio play error:",e),p(!0)})),d(!c))},disabled:u,children:c?(0,M.jsx)(C.A,{}):(0,M.jsx)(v.A,{})})}),(0,M.jsx)(n.A,{sx:{flexGrow:1,height:4,bgcolor:(0,l.X4)("#000",.1),borderRadius:2,position:"relative"},children:(0,M.jsx)(n.A,{sx:{position:"absolute",left:0,top:0,height:"100%",width:`${g/h*100||0}%`,bgcolor:"black",borderRadius:2}})}),(0,M.jsxs)(i.A,{variant:"caption",color:"text.secondary",children:[f(g)," / ",f(h||0)]}),(0,M.jsx)(L,{children:(0,M.jsx)(R.A,{fontSize:"small"})})]}),t&&(0,M.jsxs)(i.A,{variant:"caption",color:"black",sx:{mt:1,display:"block"},children:["File: ",t]})]})},B=(0,a.Ay)(c.A)((e=>{let{theme:r}=e;return{color:"black !important",fontWeight:400,padding:"8px 16px","&.Mui-selected":{backgroundColor:(0,l.X4)(r.palette.primary.main,.1),color:"black !important",fontWeight:500},"&:hover":{backgroundColor:(0,l.X4)(r.palette.primary.main,.05),color:"black !important"}}})),q=(0,a.Ay)(d.A)((e=>{let{theme:r}=e;return{"& .MuiSelect-select":{color:"black !important",fontWeight:500,padding:"8px 14px",height:"44px !important"},"& .MuiSvgIcon-root":{color:"black !important"}}})),H=((0,a.Ay)(u.A)({maxHeight:"100%",overflow:"auto","&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}}),(0,a.Ay)(p.A)((e=>{let{theme:r}=e;return{borderRadius:"30px",padding:"10px 20px",minWidth:"100px",boxShadow:"none",color:"black","& .MuiSvgIcon-root":{color:"black"},"&.MuiButton-contained":{backgroundColor:r.palette.grey[200],color:"black","&:hover":{backgroundColor:r.palette.grey[300],boxShadow:"0 3px 10px rgba(0, 0, 0, 0.2)"}},"&.MuiButton-outlined":{borderColor:"black",color:"black","&:hover":{backgroundColor:(0,l.X4)(r.palette.common.black,.05),borderColor:"black"}}}}))),G=(0,a.Ay)(h.A)((e=>{let{theme:r,isDragActive:t}=e;return{padding:r.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",border:"1px dashed",borderColor:t?r.palette.primary.main:(0,l.X4)(r.palette.grey[400],.5),borderRadius:r.spacing(1),height:"60px",transition:"all 0.3s ease",backgroundColor:t?(0,l.X4)(r.palette.primary.main,.03):(0,l.X4)(r.palette.grey[100],.3),"&:hover":{borderColor:r.palette.primary.main,backgroundColor:(0,l.X4)(r.palette.primary.main,.03)}}})),V=[{id:"#g1_aura-angus-en",label:"Aura Angus (EN)"},{id:"#g1_aura-arcas-en",label:"Aura Arcas (EN)"},{id:"#g1_aura-asteria-en",label:"Aura Asteria (EN)"},{id:"#g1_aura-athena-en",label:"Aura Athena (EN)"},{id:"#g1_aura-helios-en",label:"Aura Helios (EN)"},{id:"#g1_aura-hera-en",label:"Aura Hera (EN)"},{id:"#g1_aura-luna-en",label:"Aura Luna (EN)"},{id:"#g1_aura-orion-en",label:"Aura Orion (EN)"},{id:"#g1_aura-orpheus-en",label:"Aura Orpheus (EN)"},{id:"#g1_aura-perseus-en",label:"Aura Perseus (EN)"},{id:"#g1_aura-stella-en",label:"Aura Stella (EN)"},{id:"#g1_aura-zeus-en",label:"Aura Zeus (EN)"}],Y=()=>{const e=(0,x.A)(),{user:r}=(0,T.As)(),a=(0,W.wA)(),[c,d]=(0,o.useState)(""),[p,h]=(0,o.useState)(!1),[v,C]=(0,o.useState)(!1),[R,_]=(0,o.useState)("#g1_aura-asteria-en"),[Y,Z]=(0,o.useState)(!1),[J,K]=(0,o.useState)(""),[Q,ee]=(0,o.useState)(!1),[re,te]=(0,o.useState)(""),[oe,ae]=(0,o.useState)(!1),[ne,le]=(0,o.useState)(null),[ie,se]=(0,o.useState)(""),[ce,de]=(0,o.useState)(!1),{speak:ue,cancel:pe,speaking:he,supported:xe,voices:ge,pause:be,resume:fe}=(0,I.o3)();(0,o.useEffect)((()=>{(async()=>{const e=await(async()=>{try{return await t.e(355).then(t.bind(t,9355)),!0}catch(J){return console.error("PDF.js not supported:",J),!1}})();ee(e)})();(async()=>{try{const e="https://onedollarai.com";if(O.A.get("csrftoken"))console.log("CSRF token already exists:",O.A.get("csrftoken")?"Token exists":"No token found");else{console.log("No CSRF token found, fetching a new one...");const r=await N.A.get(`${e}/api/get_csrf_token/`,{withCredentials:!0});if(200===r.status){const e=O.A.get("csrftoken");console.log("CSRF token fetched successfully:",e?"Token received":"No token set")}else console.warn("Failed to fetch CSRF token:",r.status)}}catch(J){console.error("Error fetching CSRF token:",J)}})()}),[]);const me=async e=>{if(e)if(Z(!0),K(""),te(e.name),le(null),se(""),"application/pdf"===e.type){if(!Q)return K("PDF support is available but requires additional configuration. Please check the console for details."),console.error("PDF.js library installed but not properly configured. Check worker path."),void Z(!1);try{const r=await(async e=>{try{const r=await t.e(355).then(t.bind(t,9355)),o=await Promise.resolve().then((function(){var e=new Error("Cannot find module 'pdfjs-dist/build/pdf.worker.entry'");throw e.code="MODULE_NOT_FOUND",e}));r.GlobalWorkerOptions.workerSrc=o;const a=await e.arrayBuffer(),n=r.getDocument(a),l=await n.promise;let i="";for(let e=1;e<=l.numPages;e++){const r=await l.getPage(e);i+=(await r.getTextContent()).items.map((e=>e.str)).join(" ")+"\n\n"}return i.trim()}catch(J){throw console.error("Error parsing PDF:",J),new Error("Failed to extract text from PDF: "+(J.message||"Unknown error"))}})(e);d(r),Z(!1)}catch(r){console.error("PDF parsing error:",r),K("Error processing PDF file: "+(r.message||"Unknown error")),Z(!1)}}else if("text/plain"===e.type){const r=new FileReader;r.onload=e=>{d(e.target.result),Z(!1)},r.onerror=e=>{var r;console.error("File reading error:",e),K("Error reading file: "+((null===(r=e.target.error)||void 0===r?void 0:r.message)||"Unknown error")),Z(!1)},r.readAsText(e)}else K("Please upload a PDF or text file (.pdf or .txt)"),Z(!1)},Ae=(0,o.useCallback)((e=>{e.length>0&&me(e[0])}),[]),{getRootProps:ye,getInputProps:ke,isDragActive:je}=(0,w.VB)({onDrop:Ae,accept:{"application/pdf":[".pdf"],"text/plain":[".txt"]},multiple:!1});return xe?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(X.mg,{children:(0,M.jsx)("title",{children:"Text to Speech | OneDollarAI"})}),(0,M.jsx)(n.A,{sx:{backgroundColor:"dark"===e.palette.mode?(0,l.X4)(e.palette.background.default,.9):(0,l.X4)(e.palette.grey[100],.9),pt:3,pb:6},children:(0,M.jsxs)(u.A,{maxWidth:"lg",children:[(0,M.jsx)(i.A,{variant:"h2",component:"h1",gutterBottom:!0,color:"black",sx:{fontSize:"2rem",fontWeight:600},children:"Text to Speech"}),(0,M.jsx)(i.A,{variant:"subtitle1",color:"black",sx:{mb:4},children:"Convert your text to natural-sounding speech or upload a document to listen to it."}),(0,M.jsx)(b.A,{elevation:0,sx:{borderRadius:2,overflow:"hidden",backgroundColor:"#fff",border:"1px solid",borderColor:(0,l.X4)(e.palette.grey[300],.5)},children:(0,M.jsxs)(f.A,{sx:{p:{xs:2,md:3}},children:[!Q&&(0,M.jsx)(g.A,{severity:"warning",sx:{mb:3,background:"transparent",color:"orange"},children:"PDF support is not available. We've installed the library but it may need additional configuration."}),J&&(0,M.jsx)(g.A,{severity:"error",sx:{mb:3,background:"transparent",color:"red"},children:J}),Y?(0,M.jsx)(n.A,{sx:{display:"flex",justifyContent:"center",my:3},children:(0,M.jsx)(m.A,{})}):(0,M.jsxs)(n.A,{sx:{mb:3,position:"relative"},children:[(0,M.jsx)(A.A,{placeholder:"Enter text to convert to speech",multiline:!0,rows:6,fullWidth:!0,value:c,onChange:e=>{d(e.target.value)},variant:"outlined",InputProps:{style:{color:"black"}},sx:{backgroundColor:(0,l.X4)(e.palette.grey[100],.5),"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(0, 0, 0, 0.1)"},"&:hover fieldset":{borderColor:(0,l.X4)(e.palette.grey[400],.5)},"&.Mui-focused fieldset":{borderColor:e.palette.primary.main}}}}),(0,M.jsxs)(n.A,{sx:{position:"absolute",right:8,top:8,display:"flex"},children:[(0,M.jsx)(y.A,{title:"Copy text",children:(0,M.jsx)(L,{children:(0,M.jsx)(s.A,{onClick:()=>{c&&navigator.clipboard.writeText(c)},disabled:!c,sx:{color:"black"},children:(0,M.jsx)(E.A,{fontSize:"small"})})})}),(0,M.jsx)(y.A,{title:"Clear text",children:(0,M.jsx)(L,{children:(0,M.jsx)(s.A,{onClick:()=>{d(""),te(""),K(""),le(null),se(""),pe(),h(!1),C(!1)},disabled:!c,sx:{color:"black"},children:(0,M.jsx)(D.A,{fontSize:"small"})})})})]})]}),(0,M.jsxs)(k.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,M.jsx)(k.Ay,{item:!0,xs:12,md:6,children:(0,M.jsxs)(G,{...ye(),isDragActive:je,variant:"outlined",children:[(0,M.jsx)("input",{...ke()}),(0,M.jsxs)(n.A,{sx:{display:"flex",alignItems:"center"},children:[(0,M.jsx)(L,{children:(0,M.jsx)(S.A,{sx:{fontSize:28,mr:2}})}),(0,M.jsxs)(n.A,{children:[(0,M.jsx)(i.A,{variant:"body2",color:"black",children:je?"Drop the file here...":"Attach File  PDF AND TXT FILES"}),re&&(0,M.jsxs)(i.A,{variant:"caption",color:"black",sx:{fontWeight:"bold"},children:["Current file: ",re]})]})]})]})}),(0,M.jsx)(k.Ay,{item:!0,xs:12,md:6,children:(0,M.jsx)(n.A,{children:(0,M.jsx)(j.A,{fullWidth:!0,variant:"outlined",size:"small",sx:{backgroundColor:(0,l.X4)(e.palette.grey[100],.5),"& .MuiOutlinedInput-root":{color:"black","& fieldset":{borderColor:"rgba(0, 0, 0, 0.1)"},"&:hover fieldset":{borderColor:(0,l.X4)(e.palette.grey[400],.5)},"&.Mui-focused fieldset":{borderColor:e.palette.primary.main}}},children:(0,M.jsx)(q,{value:R,onChange:e=>{_(e.target.value)},displayEmpty:!0,renderValue:e=>{const r=V.find((r=>r.id===e));return(0,M.jsx)(i.A,{variant:"body1",sx:{color:"black !important",fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"flex",alignItems:"center",height:"100%"},children:r?r.label:"Select Voice Model"})},MenuProps:{PaperProps:{sx:{borderRadius:2,boxShadow:"0 8px 16px rgba(0, 0, 0, 0.1)",".MuiList-root":{padding:"4px 0"}}},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},children:V.map((e=>(0,M.jsx)(B,{value:e.id,children:(0,M.jsx)(i.A,{variant:"body2",sx:{color:"black !important"},children:e.label})},e.id)))})})})})]}),ie&&(0,M.jsxs)(n.A,{sx:{mb:4,p:2,backgroundColor:(0,l.X4)(e.palette.primary.light,.05),borderRadius:1},children:[(0,M.jsx)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:(0,M.jsx)(i.A,{variant:"subtitle2",color:"black",sx:{fontWeight:600},children:"Audio Preview"})}),(0,M.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,M.jsx)(L,{children:(0,M.jsx)(P.A,{})}),(0,M.jsx)(n.A,{sx:{width:"100%"},children:(0,M.jsx)(U,{src:ie,filename:ne?ne.name:null})})]})]}),(0,M.jsxs)(n.A,{sx:{display:"flex",justifyContent:"center",gap:2,flexWrap:"wrap"},children:[(0,M.jsx)(H,{variant:"contained",onClick:async()=>{if(r)if(c.trim())if(r.balance<=0)a((0,z.v)());else try{ae(!0),K("");const e=new FormData;e.append("text",c),e.append("model",R),r&&r.id&&e.append("user_id",r.id);const t="https://onedollarai.com",o=await N.A.post(`${t}/api/text_to_speech/`,e,{headers:{"Content-Type":"multipart/form-data","X-CSRFToken":O.A.get("csrftoken")},withCredentials:!0});if(!o.data||!o.data.file_url)throw new Error("Invalid response from server");{const e=`${t}${o.data.file_url}`;console.log("Audio URL:",e),le({url:e,name:o.data.file_name}),se(e)}}catch(J){console.error("Error converting text to speech:",J);let r="Failed to convert text to speech. Please try again.";J.response?(console.error("Error response data:",J.response.data),console.error("Error response status:",J.response.status),r=J.response.data.error||r):J.request&&(console.error("Error request:",J.request),r="No response from server. Please check if the server is running."),K(r)}finally{ae(!1)}else K("Please enter text or upload a file first");else de(!0)},disabled:oe,startIcon:oe?(0,M.jsx)(m.A,{size:20,sx:{color:"black"}}):(0,M.jsx)(L,{sx:{display:"inline-flex"},children:(0,M.jsx)(P.A,{})}),size:"large",children:r?r.balance<=0?"Insufficient Balance":oe?"Converting...":"Convert to Audio":"Login Required"}),ne&&(0,M.jsx)(H,{variant:"contained",color:"secondary",onClick:()=>{if(ne&&ne.url)try{console.log("Downloading audio file:",ne);const e=ne.name||ne.url.split("/").pop();let t=`${"https://onedollarai.com"}/api/download_tts_file/?file_name=${e}`;r&&r.id&&(t+=`&user_id=${r.id}`);const o=document.createElement("a");o.href=t,o.setAttribute("download",e),o.setAttribute("target","_blank");const a=new XMLHttpRequest;a.open("GET",t,!0),a.setRequestHeader("X-CSRFToken",O.A.get("csrftoken")),a.responseType="blob",a.onload=function(){if(200===this.status){const r=new Blob([this.response],{type:"audio/mpeg"}),t=window.URL.createObjectURL(r),o=document.createElement("a");o.style.display="none",o.href=t,o.download=e,document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(t)}else window.open(t,"_blank")},a.onerror=function(){window.open(t,"_blank")},a.send()}catch(J){console.error("Error initiating download:",J),K(`Failed to initiate download: ${J.message}`),ne&&ne.url&&(window.location.href=ne.url)}else K("No audio file available for download")},startIcon:(0,M.jsx)(L,{sx:{display:"inline-flex"},children:(0,M.jsx)(F.A,{})}),size:"large",sx:{bgcolor:e.palette.grey[200],"&:hover":{bgcolor:e.palette.grey[300]}},children:"Download Audio"})]}),!r&&(0,M.jsx)(n.A,{sx:{mt:3,p:2,backgroundColor:(0,l.X4)(e.palette.info.light,.1),borderRadius:1},children:(0,M.jsx)(i.A,{variant:"body2",color:"black",align:"center",children:"Please log in to use the text-to-speech conversion feature"})}),r&&r.balance<=0&&(0,M.jsx)(n.A,{sx:{mt:3,p:2,backgroundColor:(0,l.X4)(e.palette.warning.light,.1),borderRadius:1},children:(0,M.jsx)(i.A,{variant:"body2",color:"black",align:"center",children:"Your balance is insufficient. Please top up to use the text-to-speech conversion feature."})})]})})]})}),(0,M.jsx)($.A,{isMainDialogOpen:ce,closeMainDialog:()=>de(!1),switchBetweenDialogs:()=>{},isSecondaryDialogOpen:!1,closeSecondaryDialog:()=>{},renderActiveFormComponent:()=>{}})]}):(0,M.jsx)(u.A,{maxWidth:"lg",children:(0,M.jsx)(g.A,{severity:"error",sx:{mb:3,background:"transparent",color:"red"},children:"Your browser does not support the Speech Synthesis API. Please try a different browser."})})}}}]);
//# sourceMappingURL=147.9c09ac4a.chunk.js.map