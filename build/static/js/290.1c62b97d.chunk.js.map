{"version":3,"file":"static/js/290.1c62b97d.chunk.js","mappings":"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","sources":["content/applications/Projects/ProjectEdit.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport {\r\n    Alert,\r\n    Box,\r\n    Breadcrumbs,\r\n    Card,\r\n    CardContent,\r\n    Container,\r\n    Link,\r\n    Typography,\r\n    styled,\r\n    Snackbar\r\n} from '@mui/material';\r\nimport { useAuth } from 'src/contexts/AuthContext';\r\nimport { projectService } from 'src/services/projectService';\r\nimport ProjectForm from './components/ProjectForm';\r\n\r\nconst RootWrapper = styled(Box)(({ theme }) => ({\r\n    display: \"flex\",\r\n    width: '100%',\r\n    flexDirection: 'column',\r\n    height: `calc(100dvh - ${theme.header.mobileHeight})`,\r\n    [theme.breakpoints.up(\"md\")]: {\r\n        height: `calc(100dvh - ${theme.header.height})`\r\n    }\r\n}));\r\n\r\n\r\nconst ProjectEdit = () => {\r\n    const { projectId } = useParams();\r\n    const navigate = useNavigate();\r\n    const { user } = useAuth();\r\n\r\n    const [project, setProject] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [snackbar, setSnackbar] = useState({\r\n        open: false,\r\n        message: '',\r\n        severity: 'success'\r\n    });\r\n\r\n    useEffect(() => {\r\n        loadProject();\r\n    }, [projectId]);\r\n\r\n    const loadProject = async () => {\r\n        try {\r\n            setLoading(true);\r\n            \r\n            // Check if user is admin and use appropriate endpoint\r\n            const isAdmin = user?.is_staff || user?.is_superuser;\r\n            const response = isAdmin \r\n                ? await projectService.getProjectAdmin(projectId)\r\n                : await projectService.getProject(projectId);\r\n                \r\n            setProject(response.data);\r\n        } catch (error) {\r\n            console.error('Error loading project:', error);\r\n            setError('Failed to load project. Please try again.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleUpdateProject = async (projectData) => {\r\n        try {\r\n            // Check if user is admin and use appropriate endpoint\r\n            const isAdmin = user?.is_staff || user?.is_superuser;\r\n            const response = isAdmin \r\n                ? await projectService.updateProjectAdmin(projectId, projectData)\r\n                : await projectService.updateProject(projectId, projectData);\r\n                \r\n            setProject(response.data);\r\n            setSnackbar({\r\n                open: true,\r\n                message: 'Project updated successfully!',\r\n                severity: 'success'\r\n            });\r\n\r\n            // Navigate back to projects list after a short delay\r\n            setTimeout(() => {\r\n                navigate('/projects');\r\n            }, 1500);\r\n        } catch (error) {\r\n            console.error('Error updating project:', error);\r\n            setSnackbar({\r\n                open: true,\r\n                message: 'Failed to update project',\r\n                severity: 'error'\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleCancel = () => {\r\n        navigate('/projects');\r\n    };\r\n\r\n    const handleSnackbarClose = () => {\r\n        setSnackbar({ ...snackbar, open: false });\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <RootWrapper>\r\n                <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100%' }}>\r\n                    <Typography sx={{ color: 'black' }}>Loading project...</Typography>\r\n                </Box>\r\n            </RootWrapper>\r\n        );\r\n    }\r\n\r\n    if (!project) {\r\n        return (\r\n            <RootWrapper>\r\n                <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100%' }}>\r\n                    <Typography sx={{ color: 'black' }}>Project not found</Typography>\r\n                </Box>\r\n            </RootWrapper>\r\n        );\r\n    }\r\n\r\n    const isOwner = project.owner.id === user?.id;\r\n    const isCollaborator = project.collaborators?.some(\r\n        (collab) => collab.user.id === user?.id && collab.role in ['editor', 'admin']\r\n    );\r\n    const isAdmin = user?.is_staff || user?.is_superuser;\r\n\r\n    if (!isOwner && !isCollaborator && !isAdmin) {\r\n        return (\r\n            <RootWrapper>\r\n                <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100%' }}>\r\n                    <Typography sx={{ color: 'black' }}>You don't have permission to edit this project.</Typography>\r\n                </Box>\r\n            </RootWrapper>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <title>Edit Project | OneDollarAI</title>\r\n            </Helmet>\r\n\r\n            <RootWrapper sx={{ overflowY: 'auto', pb: 2, scrollbarColor: '#888 #e3e3e3' }}>\r\n                <Container maxWidth=\"lg\">\r\n                    <Box sx={{ mt: 3, mb: 4 }}>\r\n                        {/* Breadcrumbs */}\r\n                        <Breadcrumbs sx={{ mb: 2 }}>\r\n                            <Link\r\n                                color=\"inherit\"\r\n                                href=\"/projects\"\r\n                                onClick={(e) => {\r\n                                    e.preventDefault();\r\n                                    navigate('/projects');\r\n                                }}\r\n                                sx={{ cursor: 'pointer', color: 'black' }}\r\n                            >\r\n                                Projects\r\n                            </Link>\r\n                            <Typography color=\"black\">\r\n                                Edit Project\r\n                            </Typography>\r\n                        </Breadcrumbs>\r\n\r\n                        <Typography variant=\"h2\" component=\"h1\" gutterBottom color=\"black\">\r\n                            Edit Project\r\n                        </Typography>\r\n                        <Typography variant=\"body1\" color=\"black\">\r\n                            Update your project information, content, and settings.\r\n                        </Typography>\r\n                    </Box>\r\n\r\n                    <Card>\r\n                        <CardContent>\r\n                            <ProjectForm\r\n                                project={project}\r\n                                onSubmit={handleUpdateProject}\r\n                                onCancel={handleCancel}\r\n                            />\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                </Container>\r\n            </RootWrapper>\r\n\r\n            <Snackbar\r\n                open={snackbar.open}\r\n                autoHideDuration={6000}\r\n                onClose={handleSnackbarClose}\r\n            >\r\n                <Alert\r\n                    onClose={handleSnackbarClose}\r\n                    severity={snackbar.severity}\r\n                    sx={{ width: '100%' }}\r\n                >\r\n                    {snackbar.message}\r\n                </Alert>\r\n            </Snackbar>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ProjectEdit; "],"names":["RootWrapper","styled","Box","_ref","theme","display","width","flexDirection","height","header","mobileHeight","breakpoints","up","ProjectEdit","_project$collaborator","projectId","useParams","navigate","useNavigate","user","useAuth","project","setProject","useState","loading","setLoading","error","setError","snackbar","setSnackbar","open","message","severity","useEffect","loadProject","async","response","is_staff","is_superuser","projectService","getProjectAdmin","getProject","data","console","handleSnackbarClose","_jsx","children","sx","justifyContent","alignItems","Typography","color","isOwner","owner","id","isCollaborator","collaborators","some","collab","role","isAdmin","_jsxs","_Fragment","Helmet","overflowY","pb","scrollbarColor","Container","maxWidth","mt","mb","Breadcrumbs","Link","href","onClick","e","preventDefault","cursor","variant","component","gutterBottom","Card","CardContent","ProjectForm","onSubmit","updateProjectAdmin","projectData","updateProject","setTimeout","onCancel","handleCancel","Snackbar","autoHideDuration","onClose","Alert"],"sourceRoot":""}