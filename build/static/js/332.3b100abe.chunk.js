"use strict";(self.webpackChunkOneDollarAI=self.webpackChunkOneDollarAI||[]).push([[332],{332:(e,s,l)=>{l.d(s,{A:()=>ne});var r=l(5043),o=l(6971),i=l(2703),c=l(5865),n=l(3845),a=l(8977),t=l(4669),x=l(4056),d=l(2110),h=l(6494),j=l(3336),A=l(8903),b=l(889),u=l(6605),m=l(710),g=l(5721),y=l(681),p=l(2050),v=l(8734),k=l(35),f=l(6600),C=l(5316),_=l(9347),w=(l(5225),l(8598),l(3637)),U=l(1007),S=l(6225),$=l(4593),F=l(3560),z=l(8293),R=l(3635),I=l(5772),M=l(955),W=l(4115),P=(l(4528),l(6961)),T=l(611),B=l(4194),D=l(8527),E=l(7392),L=l(9650),Y=l(1806),H=l(4882),V=l(8076),N=l(2420),O=l(3460),Z=l(7805),q=l(5456),G=l(7012),J=l(4642),K=l(2796),Q=l(1781),X=l(9215),ee=l(7795),se=l(4859),le=l(579);const re=e=>{var s,l,o,t,x,b,u,m,g;let{project:y,onUpdate:p}=e;const[v,w]=(0,r.useState)(null),[U,S]=(0,r.useState)(!1),[$,F]=(0,r.useState)(!1),[z,R]=(0,r.useState)(null);(0,r.useEffect)((()=>{I()}),[y.id]);const I=async()=>{try{S(!0),R(null);const e=await P.$.getComputingResources(y.id);w(e.data)}catch(z){console.error("Error loading computing resources:",z),R("Failed to load computing resources")}finally{S(!1)}},M=async()=>{try{var e;S(!0),R(null);const s=await P.$.analyzeComputingResources(y.id,(null===(e=y.latest_version)||void 0===e?void 0:e.content)||"");w(s.data),p&&p()}catch(z){console.error("Error analyzing resources:",z),R("Failed to analyze computing resources")}finally{S(!1)}},W=()=>{if(!v)return 0;return((v.cpu_usage||0)+(v.memory_usage||0))/2/100*20},re=e=>{switch(e){case"low":return"success";case"medium":return"warning";case"high":return"error";default:return"default"}};return U&&!v?(0,le.jsx)(d.A,{children:(0,le.jsx)(h.A,{children:(0,le.jsxs)(i.A,{sx:{textAlign:"center",py:3},children:[(0,le.jsx)(c.A,{variant:"h6",sx:{color:"black",mb:2},children:"Analyzing Computing Resources..."}),(0,le.jsx)(T.A,{})]})})}):z?(0,le.jsx)(d.A,{children:(0,le.jsxs)(h.A,{children:[(0,le.jsx)(B.A,{severity:"error",sx:{color:"black"},children:z}),(0,le.jsx)(a.A,{startIcon:(0,le.jsx)(Z.A,{}),onClick:I,sx:{mt:2,color:"black"},children:"Retry"})]})}):(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(d.A,{children:(0,le.jsxs)(h.A,{children:[(0,le.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,le.jsx)(c.A,{variant:"h6",sx:{color:"black"},children:"Computing Resource Analysis"}),(0,le.jsxs)(i.A,{sx:{display:"flex",gap:1},children:[(0,le.jsx)(D.A,{title:"View Detailed Analysis",children:(0,le.jsx)(E.A,{size:"small",onClick:()=>F(!0),sx:{color:"black"},children:(0,le.jsx)(q.A,{})})}),(0,le.jsx)(D.A,{title:"Re-analyze Resources",children:(0,le.jsx)(E.A,{size:"small",onClick:M,disabled:U,sx:{color:"black"},children:(0,le.jsx)(Z.A,{})})})]})]}),v?(0,le.jsxs)(le.Fragment,{children:[(0,le.jsxs)(A.Ay,{container:!0,spacing:3,children:[(0,le.jsxs)(A.Ay,{item:!0,xs:12,md:6,children:[(0,le.jsx)(c.A,{variant:"subtitle1",sx:{color:"black",mb:2},children:"Resource Usage"}),(0,le.jsxs)(i.A,{sx:{mb:3},children:[(0,le.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"CPU Usage"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black"},children:[null===(s=v.cpu_usage)||void 0===s?void 0:s.toFixed(1),"%"]})]}),(0,le.jsx)(T.A,{variant:"determinate",value:Math.min(v.cpu_usage||0,100),sx:{mb:2}}),(0,le.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Memory Usage"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black"},children:[null===(l=v.memory_usage)||void 0===l?void 0:l.toFixed(1)," MB"]})]}),(0,le.jsx)(T.A,{variant:"determinate",value:Math.min((v.memory_usage||0)/10,100),sx:{mb:2}}),(0,le.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Execution Time"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black"},children:[null===(o=v.execution_time)||void 0===o?void 0:o.toFixed(2),"s"]})]}),(0,le.jsx)(T.A,{variant:"determinate",value:Math.min(10*(v.execution_time||0),100)})]})]}),(0,le.jsxs)(A.Ay,{item:!0,xs:12,md:6,children:[(0,le.jsx)(c.A,{variant:"subtitle1",sx:{color:"black",mb:2},children:"Cost Analysis"}),(0,le.jsxs)(i.A,{sx:{mb:3},children:[(0,le.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Cost per Run"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"green",fontWeight:"bold"},children:["$",null===(t=v.estimated_cost_per_run)||void 0===t?void 0:t.toFixed(4)]})]}),(0,le.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Monthly Server Cost"}),(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"$20.00"})]}),(0,le.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Your Project's Monthly Cost"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"orange",fontWeight:"bold"},children:["$",W().toFixed(2)]})]}),(0,le.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Per-Use Charge"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black"},children:["$",y.price_per_use]})]})]}),(0,le.jsxs)(i.A,{sx:{mb:2},children:[(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black",mb:1},children:["Complexity Score: ",v.complexity_score||0,"/100"]}),(0,le.jsx)(n.A,{label:(oe=v.complexity_score||0,oe<30?"Low":oe<70?"Medium":"High")+" Complexity",color:re(v.resource_intensity),size:"small",sx:{mr:1}}),(0,le.jsx)(n.A,{label:`${v.resource_intensity} Intensity`,color:re(v.resource_intensity),size:"small",variant:"outlined"})]})]})]}),(0,le.jsxs)(B.A,{severity:"info",sx:{mt:2,color:"black"},icon:(0,le.jsx)(G.A,{}),children:["Based on $20/month server cost, your project uses approximately ",(W()/20*100).toFixed(1),"% of server resources.",W()>5&&(0,le.jsxs)(c.A,{variant:"body2",sx:{mt:1,color:"orange"},children:[(0,le.jsx)(J.A,{sx:{fontSize:16,mr:.5,verticalAlign:"middle"}}),"High resource usage detected. Consider optimizing your code."]})]})]}):(0,le.jsxs)(i.A,{sx:{textAlign:"center",py:3},children:[(0,le.jsx)(c.A,{variant:"body1",sx:{color:"black",mb:2},children:"No computing resource analysis available"}),(0,le.jsx)(a.A,{variant:"contained",startIcon:(0,le.jsx)(K.A,{}),onClick:M,disabled:U,sx:{backgroundColor:"black",color:"white"},children:"Analyze Resources"})]})]})}),(0,le.jsxs)(k.A,{open:$,onClose:()=>F(!1),maxWidth:"md",fullWidth:!0,children:[(0,le.jsx)(f.A,{sx:{color:"black"},children:"Detailed Computing Resource Analysis"}),(0,le.jsx)(C.A,{children:v&&(0,le.jsx)(i.A,{children:(0,le.jsxs)(A.Ay,{container:!0,spacing:3,children:[(0,le.jsxs)(A.Ay,{item:!0,xs:12,children:[(0,le.jsx)(c.A,{variant:"h6",sx:{color:"black",mb:2},children:"Resource Breakdown"}),(0,le.jsx)(L.A,{component:j.A,children:(0,le.jsxs)(Y.A,{children:[(0,le.jsx)(H.A,{children:(0,le.jsxs)(V.A,{children:[(0,le.jsx)(N.A,{sx:{color:"black",fontWeight:"bold"},children:"Resource"}),(0,le.jsx)(N.A,{sx:{color:"black",fontWeight:"bold"},children:"Usage"}),(0,le.jsx)(N.A,{sx:{color:"black",fontWeight:"bold"},children:"Percentage"}),(0,le.jsx)(N.A,{sx:{color:"black",fontWeight:"bold"},children:"Status"})]})}),(0,le.jsxs)(O.A,{children:[(0,le.jsxs)(V.A,{children:[(0,le.jsx)(N.A,{sx:{color:"black"},children:(0,le.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(Q.A,{fontSize:"small"}),"CPU Usage"]})}),(0,le.jsxs)(N.A,{sx:{color:"black"},children:[null===(x=v.cpu_usage)||void 0===x?void 0:x.toFixed(1),"%"]}),(0,le.jsxs)(N.A,{sx:{color:"black"},children:[null===(b=v.cpu_usage)||void 0===b?void 0:b.toFixed(1),"%"]}),(0,le.jsx)(N.A,{children:(0,le.jsx)(n.A,{label:v.cpu_usage>70?"High":v.cpu_usage>30?"Medium":"Low",color:v.cpu_usage>70?"error":v.cpu_usage>30?"warning":"success",size:"small"})})]}),(0,le.jsxs)(V.A,{children:[(0,le.jsx)(N.A,{sx:{color:"black"},children:(0,le.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(X.A,{fontSize:"small"}),"Memory Usage"]})}),(0,le.jsxs)(N.A,{sx:{color:"black"},children:[null===(u=v.memory_usage)||void 0===u?void 0:u.toFixed(1)," MB"]}),(0,le.jsxs)(N.A,{sx:{color:"black"},children:[((v.memory_usage||0)/1e3*100).toFixed(1),"%"]}),(0,le.jsx)(N.A,{children:(0,le.jsx)(n.A,{label:v.memory_usage>700?"High":v.memory_usage>300?"Medium":"Low",color:v.memory_usage>700?"error":v.memory_usage>300?"warning":"success",size:"small"})})]}),(0,le.jsxs)(V.A,{children:[(0,le.jsx)(N.A,{sx:{color:"black"},children:(0,le.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(ee.A,{fontSize:"small"}),"Execution Time"]})}),(0,le.jsxs)(N.A,{sx:{color:"black"},children:[null===(m=v.execution_time)||void 0===m?void 0:m.toFixed(2),"s"]}),(0,le.jsxs)(N.A,{sx:{color:"black"},children:[((v.execution_time||0)/30*100).toFixed(1),"%"]}),(0,le.jsx)(N.A,{children:(0,le.jsx)(n.A,{label:v.execution_time>20?"High":v.execution_time>10?"Medium":"Low",color:v.execution_time>20?"error":v.execution_time>10?"warning":"success",size:"small"})})]}),(0,le.jsxs)(V.A,{children:[(0,le.jsx)(N.A,{sx:{color:"black"},children:(0,le.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(se.A,{fontSize:"small"}),"Storage Usage"]})}),(0,le.jsxs)(N.A,{sx:{color:"black"},children:[null===(g=v.storage_usage)||void 0===g?void 0:g.toFixed(1)," MB"]}),(0,le.jsxs)(N.A,{sx:{color:"black"},children:[((v.storage_usage||0)/100*100).toFixed(1),"%"]}),(0,le.jsx)(N.A,{children:(0,le.jsx)(n.A,{label:v.storage_usage>70?"High":v.storage_usage>30?"Medium":"Low",color:v.storage_usage>70?"error":v.storage_usage>30?"warning":"success",size:"small"})})]})]})]})})]}),(0,le.jsxs)(A.Ay,{item:!0,xs:12,children:[(0,le.jsx)(c.A,{variant:"h6",sx:{color:"black",mb:2},children:"Cost Analysis Details"}),(0,le.jsxs)(B.A,{severity:"info",sx:{color:"black"},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{mb:1},children:(0,le.jsx)("strong",{children:"Cost Calculation Formula:"})}),(0,le.jsx)(c.A,{variant:"body2",sx:{fontFamily:"monospace"},children:"Cost per run = (CPU% + Memory%) \xd7 Execution Time \xd7 Monthly Server Cost \xf7 (30 days \xd7 24 hours \xd7 3600 seconds)"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{mt:1},children:[(0,le.jsx)("strong",{children:"Monthly Server Cost:"})," $20.00"]}),(0,le.jsxs)(c.A,{variant:"body2",children:[(0,le.jsx)("strong",{children:"Your Project's Monthly Cost:"})," $",W().toFixed(2)]})]})]})]})})}),(0,le.jsx)(_.A,{children:(0,le.jsx)(a.A,{onClick:()=>F(!1),sx:{color:"black"},children:"Close"})})]})]});var oe};var oe=l(9336),ie=l(8746);const ce=e=>{let{project:s,onUpdate:l}=e;const[o,t]=(0,r.useState)(null),[x,b]=(0,r.useState)(null),[u,m]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[p,v]=(0,r.useState)(null);(0,r.useEffect)((()=>{w()}),[s.id]);const w=async()=>{try{m(!0),v(null);const e=await P.$.getUserUsage(s.id);t(e.data);try{const e=await P.$.getProjectUsage(s.id);b(e.data)}catch(p){console.log("No permission to view overall project usage")}}catch(p){console.error("Error loading usage data:",p),v("Failed to load usage data")}finally{m(!1)}},U=()=>o?parseFloat(o.total_cost||0):0,S=()=>o&&0!==o.usage_count?U()/o.usage_count:0,F=e=>0===e?{label:"Never Used",color:"default"}:e<5?{label:"Light Usage",color:"success"}:e<20?{label:"Moderate Usage",color:"warning"}:{label:"Heavy Usage",color:"error"},z=e=>0===e?{label:"No Cost",color:"success"}:e<1?{label:"Low Cost",color:"success"}:e<5?{label:"Moderate Cost",color:"warning"}:{label:"High Cost",color:"error"};return u&&!o?(0,le.jsx)(d.A,{children:(0,le.jsx)(h.A,{children:(0,le.jsxs)(i.A,{sx:{textAlign:"center",py:3},children:[(0,le.jsx)(c.A,{variant:"h6",sx:{color:"black",mb:2},children:"Loading Usage Data..."}),(0,le.jsx)(T.A,{})]})})}):p?(0,le.jsx)(d.A,{children:(0,le.jsxs)(h.A,{children:[(0,le.jsx)(B.A,{severity:"error",sx:{color:"black"},children:p}),(0,le.jsx)(a.A,{startIcon:(0,le.jsx)(Z.A,{}),onClick:w,sx:{mt:2,color:"black"},children:"Retry"})]})}):(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(d.A,{children:(0,le.jsxs)(h.A,{children:[(0,le.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,le.jsx)(c.A,{variant:"h6",sx:{color:"black"},children:"Usage & Billing Tracker"}),(0,le.jsxs)(i.A,{sx:{display:"flex",gap:1},children:[(0,le.jsx)(D.A,{title:"View Detailed Usage",children:(0,le.jsx)(E.A,{size:"small",onClick:()=>y(!0),sx:{color:"black"},children:(0,le.jsx)(q.A,{})})}),(0,le.jsx)(D.A,{title:"Refresh Usage Data",children:(0,le.jsx)(E.A,{size:"small",onClick:w,disabled:u,sx:{color:"black"},children:(0,le.jsx)(Z.A,{})})})]})]}),o?(0,le.jsxs)(le.Fragment,{children:[(0,le.jsxs)(A.Ay,{container:!0,spacing:3,children:[(0,le.jsxs)(A.Ay,{item:!0,xs:12,md:6,children:[(0,le.jsx)(c.A,{variant:"subtitle1",sx:{color:"black",mb:2},children:"Your Usage"}),(0,le.jsxs)(i.A,{sx:{mb:3},children:[(0,le.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Times Used"}),(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black",fontWeight:"bold"},children:o.usage_count})]}),(0,le.jsx)(n.A,{label:F(o.usage_count).label,color:F(o.usage_count).color,size:"small",sx:{mb:2}}),(0,le.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Total Cost"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"green",fontWeight:"bold"},children:["$",U().toFixed(2)]})]}),(0,le.jsx)(n.A,{label:z(U()).label,color:z(U()).color,size:"small",sx:{mb:2}}),(0,le.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Average Cost per Use"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black"},children:["$",S().toFixed(4)]})]}),(0,le.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Last Used"}),(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:(0,I.A)(new Date(o.last_used),{addSuffix:!0})})]})]})]}),(0,le.jsxs)(A.Ay,{item:!0,xs:12,md:6,children:[(0,le.jsx)(c.A,{variant:"subtitle1",sx:{color:"black",mb:2},children:"Pricing Information"}),(0,le.jsxs)(i.A,{sx:{mb:3},children:[(0,le.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"One-time Purchase"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black",fontWeight:"bold"},children:["$",s.price]})]}),(0,le.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Per-use Charge"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black",fontWeight:"bold"},children:["$",s.price_per_use]})]}),(0,le.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Your Total Spent"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"orange",fontWeight:"bold"},children:["$",U().toFixed(2)]})]}),(0,le.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Savings vs One-time"}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:s.price>U()?"green":"red",fontWeight:"bold"},children:["$",(s.price-U()).toFixed(2)]})]})]}),(0,le.jsxs)(i.A,{children:[(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black",mb:1},children:(0,le.jsx)("strong",{children:"Recommendation:"})}),s.price>U()?(0,le.jsx)(B.A,{severity:"success",sx:{color:"black"},children:(0,le.jsxs)(c.A,{variant:"body2",children:["Continue with per-use billing. You're saving $",(s.price-U()).toFixed(2)," compared to one-time purchase."]})}):(0,le.jsx)(B.A,{severity:"warning",sx:{color:"black"},children:(0,le.jsxs)(c.A,{variant:"body2",children:["Consider one-time purchase. You've spent $",U().toFixed(2)," vs $",s.price," one-time cost."]})})]})]})]}),(0,le.jsx)(B.A,{severity:"info",sx:{mt:2,color:"black"},icon:(0,le.jsx)(K.A,{}),children:(0,le.jsxs)(c.A,{variant:"body2",children:["You've used this project ",o.usage_count," times with a total cost of $",U().toFixed(2),".",o.usage_count>0&&(0,le.jsxs)("span",{children:[" Average cost per use: $",S().toFixed(4)]})]})})]}):(0,le.jsxs)(i.A,{sx:{textAlign:"center",py:3},children:[(0,le.jsx)(c.A,{variant:"body1",sx:{color:"black",mb:2},children:"No usage data available"}),(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:"Start using this project to see usage statistics and billing information."})]})]})}),(0,le.jsxs)(k.A,{open:g,onClose:()=>y(!1),maxWidth:"md",fullWidth:!0,children:[(0,le.jsx)(f.A,{sx:{color:"black"},children:"Detailed Usage & Billing Information"}),(0,le.jsx)(C.A,{children:o&&(0,le.jsx)(i.A,{children:(0,le.jsxs)(A.Ay,{container:!0,spacing:3,children:[(0,le.jsxs)(A.Ay,{item:!0,xs:12,children:[(0,le.jsx)(c.A,{variant:"h6",sx:{color:"black",mb:2},children:"Your Usage Details"}),(0,le.jsx)(L.A,{component:j.A,children:(0,le.jsxs)(Y.A,{children:[(0,le.jsx)(H.A,{children:(0,le.jsxs)(V.A,{children:[(0,le.jsx)(N.A,{sx:{color:"black",fontWeight:"bold"},children:"Metric"}),(0,le.jsx)(N.A,{sx:{color:"black",fontWeight:"bold"},children:"Value"}),(0,le.jsx)(N.A,{sx:{color:"black",fontWeight:"bold"},children:"Status"})]})}),(0,le.jsxs)(O.A,{children:[(0,le.jsxs)(V.A,{children:[(0,le.jsx)(N.A,{sx:{color:"black"},children:(0,le.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)($.A,{fontSize:"small"}),"Total Usage Count"]})}),(0,le.jsxs)(N.A,{sx:{color:"black"},children:[o.usage_count," times"]}),(0,le.jsx)(N.A,{children:(0,le.jsx)(n.A,{label:F(o.usage_count).label,color:F(o.usage_count).color,size:"small"})})]}),(0,le.jsxs)(V.A,{children:[(0,le.jsx)(N.A,{sx:{color:"black"},children:(0,le.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(G.A,{fontSize:"small"}),"Total Cost"]})}),(0,le.jsxs)(N.A,{sx:{color:"black"},children:["$",U().toFixed(2)]}),(0,le.jsx)(N.A,{children:(0,le.jsx)(n.A,{label:z(U()).label,color:z(U()).color,size:"small"})})]}),(0,le.jsxs)(V.A,{children:[(0,le.jsx)(N.A,{sx:{color:"black"},children:(0,le.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(ee.A,{fontSize:"small"}),"Average Cost per Use"]})}),(0,le.jsxs)(N.A,{sx:{color:"black"},children:["$",S().toFixed(4)]}),(0,le.jsx)(N.A,{children:(0,le.jsx)(n.A,{label:S()<s.price_per_use?"Below Rate":"At Rate",color:S()<s.price_per_use?"success":"warning",size:"small"})})]}),(0,le.jsxs)(V.A,{children:[(0,le.jsx)(N.A,{sx:{color:"black"},children:(0,le.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(ie.A,{fontSize:"small"}),"Last Used"]})}),(0,le.jsx)(N.A,{sx:{color:"black"},children:(0,I.A)(new Date(o.last_used),{addSuffix:!0})}),(0,le.jsx)(N.A,{children:(0,le.jsx)(n.A,{label:"Recent",color:"success",size:"small"})})]})]})]})})]}),x&&x.length>0&&(0,le.jsxs)(A.Ay,{item:!0,xs:12,children:[(0,le.jsx)(c.A,{variant:"h6",sx:{color:"black",mb:2},children:"Project Usage Comparison"}),(0,le.jsx)(L.A,{component:j.A,children:(0,le.jsxs)(Y.A,{children:[(0,le.jsx)(H.A,{children:(0,le.jsxs)(V.A,{children:[(0,le.jsx)(N.A,{sx:{color:"black",fontWeight:"bold"},children:"User"}),(0,le.jsx)(N.A,{sx:{color:"black",fontWeight:"bold"},children:"Usage Count"}),(0,le.jsx)(N.A,{sx:{color:"black",fontWeight:"bold"},children:"Total Cost"}),(0,le.jsx)(N.A,{sx:{color:"black",fontWeight:"bold"},children:"Last Used"})]})}),(0,le.jsx)(O.A,{children:x.slice(0,10).map(((e,s)=>(0,le.jsxs)(V.A,{children:[(0,le.jsx)(N.A,{sx:{color:"black"},children:e.user.email}),(0,le.jsx)(N.A,{sx:{color:"black"},children:e.usage_count}),(0,le.jsxs)(N.A,{sx:{color:"black"},children:["$",parseFloat(e.total_cost).toFixed(2)]}),(0,le.jsx)(N.A,{sx:{color:"black"},children:(0,I.A)(new Date(e.last_used),{addSuffix:!0})})]},s)))})]})})]}),(0,le.jsxs)(A.Ay,{item:!0,xs:12,children:[(0,le.jsx)(c.A,{variant:"h6",sx:{color:"black",mb:2},children:"Billing Recommendations"}),(0,le.jsxs)(B.A,{severity:"info",sx:{color:"black"},children:[(0,le.jsxs)(c.A,{variant:"body2",sx:{mb:1},children:[(0,le.jsx)("strong",{children:"Current Billing Method:"})," Per-use billing at $",s.price_per_use," per use"]}),(0,le.jsxs)(c.A,{variant:"body2",sx:{mb:1},children:[(0,le.jsx)("strong",{children:"One-time Purchase Option:"})," $",s.price]}),(0,le.jsxs)(c.A,{variant:"body2",sx:{mb:1},children:[(0,le.jsx)("strong",{children:"Your Total Spent:"})," $",U().toFixed(2)]}),(0,le.jsx)(oe.A,{sx:{my:1}}),(0,le.jsx)(c.A,{variant:"body2",children:s.price>U()?(0,le.jsxs)("span",{style:{color:"green"},children:["\u2705 Continue with per-use billing. You're saving $",(s.price-U()).toFixed(2),"."]}):(0,le.jsxs)("span",{style:{color:"orange"},children:["\u26a0\ufe0f Consider one-time purchase. You've exceeded the one-time cost by $",(U()-s.price).toFixed(2),"."]})})]})]})]})})}),(0,le.jsx)(_.A,{children:(0,le.jsx)(a.A,{onClick:()=>y(!1),sx:{color:"black"},children:"Close"})})]})]})},ne=e=>{let{project:s,onClose:l,onRun:T,isOwner:B}=e;const D=(0,o.Zp)(),[E,L]=(0,r.useState)(0),[Y,H]=(0,r.useState)(null),[V,N]=(0,r.useState)(null),[O,Z]=(0,r.useState)([]),[q,G]=(0,r.useState)(!1),[J,K]=(0,r.useState)(null),[Q,X]=(0,r.useState)(!1);(0,r.useEffect)((()=>{ee(),se(),B&&oe()}),[s.id,B]);const ee=async()=>{try{const e=await P.$.getComputingResources(s.id);H(e.data)}catch(e){console.error("Error loading computing resources:",e)}},se=async()=>{try{const e=await P.$.getUserUsage(s.id);N(e.data)}catch(e){console.error("Error loading user usage:",e)}},oe=async()=>{try{const e=await P.$.getPendingVersions(s.id);Z(e.data)}catch(e){console.error("Error loading pending versions:",e)}},ie=s.latest_public_version||s.latest_private_version;return(0,le.jsxs)(i.A,{sx:{width:"100%",maxHeight:"80vh",overflow:"auto"},children:[(0,le.jsxs)(i.A,{sx:{mb:3},children:[(0,le.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[(0,le.jsxs)(i.A,{children:[(0,le.jsx)(c.A,{variant:"h4",component:"h1",gutterBottom:!0,sx:{color:"black"},children:s.title}),(0,le.jsx)(c.A,{variant:"body1",sx:{mb:2,color:"black"},children:s.description})]}),(0,le.jsxs)(i.A,{sx:{display:"flex",gap:1},children:[s.is_public?(0,le.jsx)(n.A,{icon:(0,le.jsx)(w.A,{sx:{color:"black"}}),label:"Public",color:"primary",variant:"outlined"}):(0,le.jsx)(n.A,{icon:(0,le.jsx)(U.A,{sx:{color:"black"}}),label:"Private",color:"default",variant:"outlined"}),(0,le.jsx)(n.A,{icon:(0,le.jsx)(S.A,{sx:{color:"black"}}),label:s.status,color:(e=>{switch(e){case"approved":return"success";case"pending":return"warning";case"rejected":return"error";default:return"default"}})(s.status),variant:"outlined"})]})]}),(0,le.jsxs)(i.A,{sx:{display:"flex",gap:2,mb:3},children:[(0,le.jsx)(a.A,{variant:"contained",startIcon:(0,le.jsx)($.A,{sx:{color:"white"}}),onClick:()=>{D(`/project/${s.id}/run`)},sx:{backgroundColor:"black",color:"white"},children:"Run Project"}),B&&(0,le.jsx)(a.A,{variant:"outlined",startIcon:(0,le.jsx)(F.A,{sx:{color:"black"}}),onClick:()=>D(`/project/${s.id}/edit`),sx:{color:"black",borderColor:"black"},children:"Edit Project"})]})]}),(0,le.jsx)(i.A,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:(0,le.jsxs)(t.A,{value:E,onChange:(e,s)=>{L(s)},children:[(0,le.jsx)(x.A,{label:"Content",sx:{color:"black"}}),(0,le.jsx)(x.A,{label:"Usage",sx:{color:"black"}}),(0,le.jsx)(x.A,{label:"Computing Resources",sx:{color:"black"}}),(0,le.jsx)(x.A,{label:"Analytics",sx:{color:"black"}}),B&&(0,le.jsx)(x.A,{label:"Collaboration",sx:{color:"black"}})]})}),(0,le.jsxs)(i.A,{sx:{mt:2},children:[0===E&&(0,le.jsx)(d.A,{children:(0,le.jsxs)(h.A,{children:[(0,le.jsx)(c.A,{variant:"h6",gutterBottom:!0,sx:{color:"black"},children:"Project Content"}),(0,le.jsx)(j.A,{sx:{p:2,backgroundColor:"#f5f5f5",fontFamily:"monospace",whiteSpace:"pre-wrap",overflow:"auto",maxHeight:"400px"},children:"code"===s.project_type?(0,le.jsx)("div",{style:{color:"black"},children:(0,le.jsx)(M.oz,{rehypePlugins:[W.A],children:(null===ie||void 0===ie?void 0:ie.content)||"No content available"})}):(0,le.jsx)(c.A,{variant:"body1",sx:{color:"black"},children:(null===ie||void 0===ie?void 0:ie.content)||"No content available"})})]})}),1===E&&(0,le.jsxs)(A.Ay,{container:!0,spacing:3,children:[(0,le.jsx)(A.Ay,{item:!0,xs:12,md:6,children:(0,le.jsx)(d.A,{children:(0,le.jsxs)(h.A,{children:[(0,le.jsx)(c.A,{variant:"h6",gutterBottom:!0,sx:{color:"black"},children:"Usage Instructions"}),null!==ie&&void 0!==ie&&ie.usage_instructions?(0,le.jsx)("div",{style:{color:"black"},children:(0,le.jsx)(M.oz,{children:ie.usage_instructions})}):(0,le.jsx)(c.A,{sx:{color:"black"},children:"No usage instructions available."})]})})}),(0,le.jsx)(A.Ay,{item:!0,xs:12,md:6,children:(0,le.jsx)(ce,{project:s,onUpdate:se})})]}),2===E&&(0,le.jsx)(re,{project:s,onUpdate:ee}),3===E&&(0,le.jsxs)(A.Ay,{container:!0,spacing:3,children:[(0,le.jsx)(A.Ay,{item:!0,xs:12,md:6,children:(0,le.jsx)(d.A,{children:(0,le.jsxs)(h.A,{children:[(0,le.jsx)(c.A,{variant:"h6",gutterBottom:!0,sx:{color:"black"},children:"Project Analytics"}),(0,le.jsxs)(i.A,{sx:{mb:2},children:[(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black",mb:1},children:["Total Views: ",s.total_views||0]}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black",mb:1},children:["Total Runs: ",s.total_runs||0]}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black",mb:1},children:["Total Purchases: ",s.total_purchases||0]}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black",mb:1},children:["Total Revenue: $",s.total_revenue||0]})]})]})})}),V&&(0,le.jsx)(A.Ay,{item:!0,xs:12,md:6,children:(0,le.jsx)(d.A,{children:(0,le.jsxs)(h.A,{children:[(0,le.jsx)(c.A,{variant:"h6",gutterBottom:!0,sx:{color:"black"},children:"Your Usage"}),(0,le.jsxs)(i.A,{sx:{mb:2},children:[(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black",mb:1},children:["Times Used: ",V.usage_count]}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black",mb:1},children:["Total Cost: $",V.total_cost]}),(0,le.jsxs)(c.A,{variant:"body2",sx:{color:"black",mb:1},children:["Last Used: ",(0,I.A)(new Date(V.last_used),{addSuffix:!0})]})]})]})})})]}),4===E&&B&&(0,le.jsx)(d.A,{children:(0,le.jsxs)(h.A,{children:[(0,le.jsx)(c.A,{variant:"h6",gutterBottom:!0,sx:{color:"black"},children:"Collaboration Management"}),(0,le.jsxs)(b.A,{children:[(0,le.jsx)(u.A,{expandIcon:(0,le.jsx)(z.A,{}),children:(0,le.jsxs)(c.A,{sx:{color:"black"},children:["Pending Versions (",O.length,")"]})}),(0,le.jsx)(m.A,{children:O.length>0?(0,le.jsx)(g.A,{children:O.map((e=>(0,le.jsxs)(y.Ay,{divider:!0,children:[(0,le.jsx)(p.A,{children:(0,le.jsx)(F.A,{sx:{color:"black"}})}),(0,le.jsx)(v.A,{primary:`Version ${e.version_number} by ${e.created_by.first_name} ${e.created_by.last_name}`,secondary:(0,I.A)(new Date(e.created_at),{addSuffix:!0}),sx:{"& .MuiListItemText-primary":{color:"black"}}}),(0,le.jsx)(i.A,{sx:{display:"flex",gap:1},children:(0,le.jsx)(a.A,{size:"small",color:"success",startIcon:(0,le.jsx)(R.A,{}),onClick:()=>{K(e),G(!0)},children:"Review"})})]},e.id)))}):(0,le.jsx)(c.A,{sx:{color:"black"},children:"No pending versions to review."})})]})]})})]}),(0,le.jsxs)(k.A,{open:q,onClose:()=>G(!1),maxWidth:"md",fullWidth:!0,children:[(0,le.jsxs)(f.A,{sx:{color:"black"},children:["Review Version ",null===J||void 0===J?void 0:J.version_number]}),(0,le.jsx)(C.A,{children:J&&(0,le.jsxs)(i.A,{children:[(0,le.jsxs)(c.A,{variant:"body2",sx:{mb:2,color:"black"},children:["Submitted by: ",J.created_by.first_name," ",J.created_by.last_name]}),(0,le.jsxs)(c.A,{variant:"body2",sx:{mb:2,color:"black"},children:["Date: ",(0,I.A)(new Date(J.created_at),{addSuffix:!0})]}),(0,le.jsx)(c.A,{variant:"h6",sx:{mb:2,color:"black"},children:"Content Changes:"}),(0,le.jsx)(j.A,{sx:{p:2,backgroundColor:"#f5f5f5",fontFamily:"monospace",whiteSpace:"pre-wrap",overflow:"auto",maxHeight:"300px"},children:(0,le.jsx)(c.A,{variant:"body2",sx:{color:"black"},children:J.content})})]})}),(0,le.jsxs)(_.A,{children:[(0,le.jsx)(a.A,{onClick:()=>G(!1),sx:{color:"black"},children:"Cancel"}),(0,le.jsx)(a.A,{onClick:()=>(async(e,l)=>{try{X(!0),await P.$.rejectVersion(s.id,e,l),await oe(),G(!1)}catch(r){console.error("Error rejecting version:",r)}finally{X(!1)}})(null===J||void 0===J?void 0:J.id,"Rejected by owner"),color:"error",variant:"outlined",disabled:Q,children:"Reject"}),(0,le.jsx)(a.A,{onClick:()=>(async e=>{try{X(!0),await P.$.approveVersion(s.id,e),await oe(),G(!1)}catch(l){console.error("Error approving version:",l)}finally{X(!1)}})(null===J||void 0===J?void 0:J.id),color:"success",variant:"contained",disabled:Q,children:"Approve"})]})]})]})}}}]);
//# sourceMappingURL=332.3b100abe.chunk.js.map