"use strict";(self.webpackChunkOneDollarAI=self.webpackChunkOneDollarAI||[]).push([[965],{965:(e,t,r)=>{r.r(t),r.d(t,{default:()=>U});var s=r(5043),o=r(6971),a=r(9490),c=r(5381),n=r(2703),i=r(611),l=r(5865),p=r(4194),d=r(8977),j=r(794),u=r(7332),g=r(4528),v=r(6961),w=r(9310),m=r(2110),h=r(6494),y=r(3845),x=r(35),b=r(6600),A=r(5316),f=r(7784),k=r(9347),$=r(6225),P=r(9662),C=r(579);const _=(0,P.A)([(0,C.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,C.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule");var S=r(1794),R=r(3560),V=r(5456);const F=(0,P.A)((0,C.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send"),I=e=>{let{project:t,onStatusUpdate:r}=e;const[o,a]=(0,s.useState)(!1),[c,i]=(0,s.useState)(""),[j,u]=(0,s.useState)(!1),[g,w]=(0,s.useState)(""),P="draft"===t.status||"rejected"===t.status;return(0,C.jsxs)(m.A,{sx:{mb:3},children:[(0,C.jsxs)(h.A,{children:[(0,C.jsx)(l.A,{variant:"h6",gutterBottom:!0,sx:{color:"black"},children:"Project Status"}),(0,C.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(e=>{switch(e){case"approved":return(0,C.jsx)($.A,{sx:{color:"green"}});case"pending":return(0,C.jsx)(_,{sx:{color:"orange"}});case"rejected":return(0,C.jsx)(S.A,{sx:{color:"red"}});case"draft":return(0,C.jsx)(R.A,{sx:{color:"gray"}});default:return(0,C.jsx)(V.A,{sx:{color:"black"}})}})(t.status),(0,C.jsx)(y.A,{label:t.status.charAt(0).toUpperCase()+t.status.slice(1),color:(e=>{switch(e){case"approved":return"success";case"pending":return"warning";case"rejected":return"error";default:return"default"}})(t.status),variant:"outlined"})]}),(0,C.jsx)(l.A,{variant:"body2",sx:{mb:3,color:"black"},children:(e=>{switch(e){case"approved":return"Your project has been approved and is now publicly available.";case"pending":return"Your project is currently under review by our team.";case"rejected":return"Your project was not approved. Please review the feedback and resubmit.";case"draft":return"Your project is in draft mode. Submit it for review when ready.";default:return"Unknown status."}})(t.status)}),"pending"===t.status&&(0,C.jsx)(p.A,{severity:"info",sx:{mb:2,color:"black"},children:"Review typically takes 1-3 business days. You'll be notified once the review is complete."}),"rejected"===t.status&&t.rejection_reason&&(0,C.jsx)(p.A,{severity:"error",sx:{mb:2,color:"black"},children:(0,C.jsxs)(l.A,{variant:"body2",sx:{color:"black"},children:[(0,C.jsx)("strong",{children:"Rejection Reason:"})," ",t.rejection_reason]})}),P&&(0,C.jsx)(d.A,{variant:"contained",startIcon:(0,C.jsx)(F,{}),onClick:()=>a(!0),sx:{backgroundColor:"black",color:"white"},children:"Submit for Review"}),"approved"===t.status&&!t.is_public&&(0,C.jsx)(p.A,{severity:"success",sx:{mt:2,color:"black"},children:"Your project is approved! You can now make it public in the project settings."})]}),(0,C.jsxs)(x.A,{open:o,onClose:()=>a(!1),maxWidth:"sm",fullWidth:!0,children:[(0,C.jsx)(b.A,{sx:{color:"black"},children:"Submit Project for Review"}),(0,C.jsxs)(A.A,{children:[(0,C.jsx)(l.A,{variant:"body2",sx:{mb:2,color:"black"},children:"Please provide a brief description of your project and why it should be approved:"}),(0,C.jsx)(f.A,{fullWidth:!0,multiline:!0,rows:4,label:"Submission Reason",value:c,onChange:e=>i(e.target.value),placeholder:"Describe your project and its value to the community...",error:!!g,helperText:g,sx:{"& .MuiInputBase-root":{color:"black","& fieldset":{borderColor:"black"}},"& .MuiInputLabel-root":{color:"black"}}})]}),(0,C.jsxs)(k.A,{children:[(0,C.jsx)(d.A,{onClick:()=>a(!1),sx:{color:"black"},children:"Cancel"}),(0,C.jsx)(d.A,{onClick:async()=>{if(c.trim())try{u(!0),w(""),await v.$.submitForReview(t.id,{reason:c,status:"pending"}),a(!1),i(""),r&&r()}catch(g){var e,s;console.error("Error submitting project for review:",g),w((null===(e=g.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.error)||"Failed to submit project for review.")}finally{u(!1)}else w("Please provide a reason for submission.")},variant:"contained",disabled:j,sx:{backgroundColor:"black",color:"white"},children:j?"Submitting...":"Submit for Review"})]})]})]})},U=()=>{const{projectId:e}=(0,o.g)(),t=(0,o.Zp)(),{user:r}=(0,g.As)(),[m,h]=(0,s.useState)(null),[y,x]=(0,s.useState)(!0),[b,A]=(0,s.useState)(null),[f,k]=(0,s.useState)({open:!1,message:"",severity:"success"});(0,s.useEffect)((()=>{$()}),[e]);const $=async()=>{try{x(!0),A(null);const t=(null===r||void 0===r?void 0:r.is_staff)||(null===r||void 0===r?void 0:r.is_superuser),s=t?await v.$.getProjectAdmin(e):await v.$.getProject(e);h(s.data),t?await v.$.trackProjectViewAdmin(e):await v.$.trackProjectView(e)}catch(b){console.error("Error loading project:",b),A("Failed to load project. Please try again.")}finally{x(!1)}};if(y)return(0,C.jsx)(c.A,{maxWidth:"lg",children:(0,C.jsxs)(n.A,{sx:{mt:4,textAlign:"center"},children:[(0,C.jsx)(i.A,{sx:{mb:2}}),(0,C.jsx)(l.A,{variant:"h6",sx:{color:"black"},children:"Loading project..."})]})});if(b)return(0,C.jsx)(c.A,{maxWidth:"lg",children:(0,C.jsxs)(n.A,{sx:{mt:4},children:[(0,C.jsx)(p.A,{severity:"error",sx:{color:"black"},children:b}),(0,C.jsx)(d.A,{startIcon:(0,C.jsx)(u.A,{}),onClick:()=>t("/projects"),sx:{mt:2,color:"black"},children:"Back to Projects"})]})});if(!m)return(0,C.jsx)(c.A,{maxWidth:"lg",children:(0,C.jsxs)(n.A,{sx:{mt:4},children:[(0,C.jsx)(p.A,{severity:"warning",sx:{color:"black"},children:"Project not found"}),(0,C.jsx)(d.A,{startIcon:(0,C.jsx)(u.A,{}),onClick:()=>t("/projects"),sx:{mt:2,color:"black"},children:"Back to Projects"})]})});const P=m.owner.id===(null===r||void 0===r?void 0:r.id);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(a.mg,{children:(0,C.jsxs)("title",{children:[m.title," - OneDollarAI"]})}),(0,C.jsxs)(c.A,{maxWidth:"lg",children:[(0,C.jsx)(n.A,{sx:{mt:3,mb:2},children:(0,C.jsx)(d.A,{startIcon:(0,C.jsx)(u.A,{}),onClick:()=>t("/projects"),sx:{color:"black"},children:"Back to Projects"})}),P&&(0,C.jsx)(I,{project:m,onStatusUpdate:$}),(0,C.jsx)(w.A,{project:m,onClose:()=>t("/projects"),onRun:()=>{t(`/project/${e}/run`)},onViewPublic:()=>{m.is_public?t(`/project/public/${e}`):k({open:!0,message:"This project is not public",severity:"warning"})},onCollaboration:()=>{t(`/projects/${e}/collaboration`)},isOwner:P}),(0,C.jsx)(j.A,{open:f.open,autoHideDuration:6e3,onClose:()=>k({...f,open:!1}),children:(0,C.jsx)(p.A,{onClose:()=>k({...f,open:!1}),severity:f.severity,sx:{width:"100%"},children:f.message})})]})]})}},1794:(e,t,r)=>{r.d(t,{A:()=>a});var s=r(9662),o=r(579);const a=(0,s.A)((0,o.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel")},6961:(e,t,r)=>{r.d(t,{$:()=>n});var s=r(6213),o=r(1880);const a="https://onedollarai.com",c=s.A.create({baseURL:`${a}/api`,headers:{"Content-Type":"application/json"},withCredentials:!0});c.interceptors.request.use((async e=>{await(async()=>{try{if(o.A.get("csrftoken"))console.log("CSRF token already exists:",o.A.get("csrftoken")?"Token exists":"No token found");else{console.log("No CSRF token found, fetching a new one...");const e=await s.A.get(`${a}/api/get_csrf_token/`,{withCredentials:!0});if(200===e.status){const e=o.A.get("csrftoken");console.log("CSRF token fetched successfully:",e?"Token received":"No token set")}else console.warn("Failed to fetch CSRF token:",e.status)}}catch(e){console.error("Error fetching CSRF token:",e)}})();const t=localStorage.getItem("accessToken");t&&(e.headers.Authorization=`Bearer ${t}`);const r=o.A.get("csrftoken");return r&&(e.headers["X-CSRFToken"]=r),e}),(e=>Promise.reject(e))),c.interceptors.response.use((e=>e),(e=>{var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(localStorage.removeItem("accessToken"),window.location.href="/login"),Promise.reject(e)}));const n={getAllProjects:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await c.get("/projects/",{params:e})},getMyProjects:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await c.get("/projects/my_projects/",{params:e})},searchProjects:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await c.get("/projects/search/",{params:{q:e,...t}})},getProject:async e=>await c.get(`/projects/${e}/`),createProject:async e=>await c.post("/projects/",e),updateProject:async(e,t)=>await c.put(`/projects/${e}/`,t),deleteProject:async e=>await c.delete(`/projects/${e}/`),runProject:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await c.post(`/projects/${e}/run/`,t)},trackProjectView:async e=>await c.post(`/projects/${e}/view/`),getProjectAnalytics:async e=>await c.get(`/projects/${e}/analytics/`),getCollaborators:async e=>await c.get(`/projects/${e}/collaborators/`),addCollaborator:async(e,t)=>await c.post(`/projects/${e}/add_collaborator/`,t),removeCollaborator:async(e,t)=>await c.post(`/projects/${e}/remove_collaborator/`,{user_id:t}),submitVersionForReview:async(e,t)=>await c.post(`/projects/${e}/submit_version_for_review/`,t),getPendingVersions:async e=>await c.get(`/projects/${e}/pending_versions/`),promoteVersionToPublic:async(e,t)=>await c.post(`/projects/${e}/versions/${t}/promote_to_public/`),getProjectVersions:async e=>await c.get(`/projects/${e}/versions/`),createProjectVersion:async(e,t)=>await c.post(`/projects/${e}/versions/`,t),updateProjectVersion:async(e,t,r)=>await c.put(`/projects/${e}/versions/${t}/`,r),deleteProjectVersion:async(e,t)=>await c.delete(`/projects/${e}/versions/${t}/`),approveProjectVersion:async(e,t)=>await c.post(`/projects/${e}/versions/${t}/approve/`),rejectProjectVersion:async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return await c.post(`/projects/${e}/versions/${t}/reject/`,{reason:r})},analyzeComputingResources:async(e,t)=>await c.post(`/projects/${e}/computing-resources/`,{code:t}),getComputingResources:async e=>await c.get(`/projects/${e}/computing-resources/`),updateComputingResources:async(e,t,r)=>await c.put(`/projects/${e}/computing-resources/${t}/`,r),getAllProjectsAdmin:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await c.get("/projects/admin/projects/",{params:e})},deleteProjectAdmin:async e=>await c.delete(`/projects/admin/projects/${e}/`),getProjectAdmin:async e=>await c.get(`/projects/admin/projects/${e}/`),getAdminAnalytics:async()=>await c.get("/projects/admin/projects/analytics/"),approveProject:async e=>await c.post(`/projects/admin/projects/${e}/approve/`),rejectProject:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return await c.post(`/projects/admin/projects/${e}/reject/`,{reason:t})},updateProjectAdmin:async(e,t)=>await c.put(`/projects/admin/projects/${e}/`,t),runProjectAdmin:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await c.post(`/projects/admin/projects/${e}/run_project/`,t)},trackProjectViewAdmin:async e=>await c.post(`/projects/admin/projects/${e}/track_view/`),addCollaboratorAdmin:async(e,t)=>await c.post(`/projects/admin/projects/${e}/add_collaborator_admin/`,t),removeCollaboratorAdmin:async(e,t)=>await c.delete(`/projects/admin/projects/${e}/remove_collaborator_admin/`,{data:{user_id:t}}),approveVersionAdmin:async(e,t)=>await c.post(`/projects/admin/projects/${e}/approve_version/`,{version_id:t}),rejectVersionAdmin:async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return await c.post(`/projects/admin/projects/${e}/reject_version/`,{version_id:t,reason:r})},getProjectUsage:async e=>await c.get(`/projects/${e}/usage/`),getUserProjectUsage:async e=>await c.get(`/projects/${e}/user_usage/`),getUserUsage:async e=>await c.get(`/projects/${e}/user_usage/`),getUserUsageAdmin:async e=>await c.get(`/projects/admin/projects/${e}/user_usage/`),getPendingVersions:async e=>await c.get(`/projects/${e}/pending_versions/`),approveVersion:async(e,t)=>await c.post(`/projects/${e}/versions/${t}/approve/`),rejectVersion:async(e,t,r)=>await c.post(`/projects/${e}/versions/${t}/reject/`,{reason:r}),submitVersionForReview:async(e,t)=>await c.post(`/projects/${e}/submit_version_for_review/`,t),submitForReview:async(e,t)=>await c.post(`/projects/${e}/submit_for_review/`,t),getPublicProject:async e=>await c.get(`/projects/public/${e}/`),getPrivateProject:async e=>await c.get(`/projects/private/${e}/`),executeCode:async(e,t)=>await c.post("/projects/execute-code/",{code:e,language:t}),advancedSearch:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{query:t="",projectType:r="",language:s="",sortBy:o="created_at",sortOrder:a="desc"}=e,n={q:t,type:r,language:s,sort_by:o,sort_order:a};return await c.get("/projects/search/",{params:n})}}},7332:(e,t,r)=>{r.d(t,{A:()=>a});var s=r(9662),o=r(579);const a=(0,s.A)((0,o.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")}}]);
//# sourceMappingURL=965.17591c6f.chunk.js.map